(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-index"],{"007b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",[a("div",[a("v-select",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search"},on:{"click:append":function(e){t.onSearch(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("div",[t._v("\n    搜索结果\n    "),a("v-layout",{attrs:{wrap:""}},t._l(t.contents,function(e,n){return a("v-flex",{key:n,staticClass:"my-1",attrs:{xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-layout",[a("div",[a("v-img",{attrs:{src:e.cover,width:"200","aspect-ratio":1.3}})],1),a("v-flex",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),a("div",{staticClass:"grey--text"},[t._v("描述："+t._s(e.desc))])])]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},on:{click:function(a){t.toPlay(e)}}},[a("v-icon",[t._v("play_circle_filled")])],1)],1)],1)],1)],1)],1)}),1),a("div",{staticClass:"text-xs-center"},[t.total_page>0?a("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){t.onSearch(!1)}},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}}):t._e()],1)],1)],1)},i=[],r=a("a34a"),s=a.n(r),o=a("6eec"),c=a("3040"),u=a("c665"),l=a("dc0a"),p=a("aa9a"),y=a("d328"),f=a("11d9"),h=a("9ab4"),v=a("60a3"),d=a("9530"),k=a.n(d);function b(){var t=Object(o["a"])(["query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }"]);return b=function(){return t},t}var w=function(t){function e(){var t;return Object(u["a"])(this,e),t=Object(y["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.types=[],t.contents=[],t.keyword="",t.type="qq",t.offset=1,t.limit=20,t.total_page=0,t}return Object(p["a"])(e,[{key:"beforeRouteUpdate",value:function(){this.syncParams(),this.search()}},{key:"syncParams",value:function(){var t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.offset=Number(t.offset)||1,this.type=t.type||"qq"}},{key:"onTypeChange",value:function(){this.keyword&&this.onSearch(!0)}},{key:"created",value:function(){this.types=[{value:"qq",text:"腾讯视频"},{value:"youku",text:"优酷视频"}],this.$route.query.keyword&&(this.syncParams(),this.search())}},{key:"onSearch",value:function(t){t&&(this.offset=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,offset:String(this.offset),limit:String(this.limit),type:this.type}})}},{key:"search",value:function(){var t=Object(c["a"])(s.a.mark(function t(){var e,a,n,i;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$apollo.query({query:k()(b()),variables:{kw:this.keyword,page:this.offset-1,type:this.type}});case 2:e=t.sent,a=e.data.videoSearch,a.page,n=a.pages,i=a.items,this.total_page=n,this.contents=i;case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"toPlay",value:function(t){this.$router.push({name:"video-player",query:{url:t.url}})}}]),Object(l["a"])(e,t),e}(v["d"]);h["a"]([Object(v["e"])("$route")],w.prototype,"beforeRouteUpdate",null),w=h["a"]([Object(v["a"])({})],w);var m=w,g=m,_=(a("fb57"),a("2877")),x=Object(_["a"])(g,n,i,!1,null,null,null);x.options.__file="index.vue";e["default"]=x.exports},"2b80":function(t,e,a){},fb57:function(t,e,a){"use strict";var n=a("2b80"),i=a.n(n);i.a}}]);