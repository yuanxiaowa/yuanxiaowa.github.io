(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fireworks"],{"09ee":function(t,i,s){"use strict";s.r(i);var h=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"fireworks"},[s("canvas",{ref:"canvas"}),t._m(0)])},e=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"fireworks__title red--text"},[t._v("\n    新年快乐！！！\n    "),s("div",{staticClass:"display-2"},[t._v("Happy New Year!")])])}],a=s("9ab4"),n=s("60a3");class r{constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas.height=window.innerHeight,this.canvas.width=window.innerWidth,this.aDots=[],this.aLines=[],this.iMaxDist=170,this.iMinDist=10,this.beat=30,this.drawLine=!1,this.mouse={vx:0,vy:0,px:0,py:0,x:this.canvas.width/2,y:this.canvas.height/2,tm:void 0,moving:!1},this.heartSpeed=30,this.init()}init(){this.getGrd(),this.canvas.addEventListener("mousemove",this.updateMouse.bind(this),!1),this.canvas.addEventListener("click",this.toggleLine.bind(this),!1)}getGrd(){this.grd=this.ctx.createLinearGradient(0,0,this.canvas.width,0),this.breakpoint=20;for(var t=0;t<this.breakpoint;t++){var i=.7*window.innerWidth/this.breakpoint*t,s="hsla( "+i+", 100%, 50%, 1 )";this.grd.addColorStop(1/this.breakpoint*t,s)}}toggleLine(){this.drawLine=!this.drawLine}buildDot(){this.aDots.push(new o(this.mouse))}updateMouse(t){this.mouse.moving=!0,clearTimeout(this.mouse.tm),this.mouse.tm=setTimeout(this.mouseStop.bind(this),500),this.mouse.px=this.mouse.x,this.mouse.py=this.mouse.y,this.mouse.x=t.clientX,this.mouse.y=t.clientY,this.mouse.vx=this.mouse.x-this.mouse.px,this.mouse.vy=this.mouse.y-this.mouse.py,this.buildDot(),this.buildDot(),this.buildDot()}mouseStop(){this.mouse.moving=!1}getDist(t,i){var s=t.x-i.x,h=t.y-i.y;return Math.sqrt(s*s+h*h)}checkLines(){this.aLines=[];for(var t=this.aDots.length-1;t>=0;t--)for(var i=this.aDots.length-1;i>t;i--){var s=this.getDist(this.aDots[t],this.aDots[i]);s<this.iMaxDist&&s>this.iMinDist&&this.aDots[t].r+this.aDots[i].r>5.5&&this.aLines.push(new d(this.aDots[t],this.aDots[i],s,this.iMaxDist))}}heartBeat(){for(var t=c(0,window.innerWidth),i=c(0,window.innerHeight),s=0;s<c(50,100);s++)this.aDots.push(new o({x:t,y:i,vx:c(-8,8),vy:c(-5,5)}));this.beat=0}drawOverlay(){this.ctx.globalCompositeOperation="overlay",this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.grd,this.ctx.fill()}update(){for(var t=this.aDots.length-1;t>=0;t--)this.aDots[t].alive?this.aDots[t].update():this.aDots.splice(t,1);this.drawLine&&this.checkLines(),this.beat>=this.heartSpeed&&!this.mouse.moving?this.heartBeat():this.beat++}draw(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="rgba( 1, 0, 0, 1 )",this.ctx.fillRect(0,0,window.innerWidth,window.innerHeight);for(var t=this.aDots.length-1;t>=0;t--)this.aDots[t].draw(this.ctx);if(this.drawLine)for(t=this.aLines.length-1;t>=0;t--)this.aLines[t].draw(this.ctx);this.drawOverlay()}run(){this.update(),this.draw(),this.bRuning&&requestAnimationFrame(this.run.bind(this))}start(){this.bRuning=!0,this.run(),this.resizeHandler=(()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.getGrd()}),window.addEventListener("resize",this.resizeHandler)}stop(){this.bRuning=!1,window.removeEventListener("resize",this.resizeHandler)}}class o{constructor(t){this.x=t.x,this.y=t.y,this.vx=1.1*c(t.vx-1.5,t.vx+1.5),this.vy=1.1*c(t.vy-1.5,t.vy+1.5),this.r=c(0,4),this.life=c(1,5)*(.3*this.r),this.alive=!0,this.friction=c(.02,.2),this.a=1}isOut(){return this.x<0||this.x>window.innerWidth||this.y<0||this.y>window.innerHeight}update(){(this.x<0||this.x>window.innerWidth)&&(this.vx*=-.8),(this.y<0||this.y>window.innerHeight)&&(this.vy*=-.8),this.lx=this.x,this.ly=this.y,this.x+=this.vx,this.y+=this.vy,this.vx>2?this.vx-=this.friction:this.vx<-2&&(this.vx+=this.friction),this.vy>2?this.vy-=this.friction:this.vy<-2&&(this.vy+=this.friction),this.life<=0?this.a<=0?this.alive=!1:this.a-=.09:this.life-=.1}draw(t){t.beginPath(),t.moveTo(this.lx,this.ly),t.lineTo(this.x,this.y),t.strokeStyle="rgba( 255, 255, 255, "+this.a+" )",t.lineWidth=this.r,t.lineCap="round",t.stroke(),t.closePath()}}class d{constructor(t,i,s,h){this.x1=t.x,this.y1=t.y,this.x2=i.x,this.y2=i.y,this.w=.1,this.size=s,this.mSize=h,this.a=this.getDistAlpha(),this.a=Math.min(t.a,i.a,this.a)}getDistAlpha(){var t=100*this.size/this.mSize,i=100-100*t/100;return i/100}draw(t){t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.strokeStyle="rgba( 255, 255, 255, "+2*this.a+" )",t.lineWidth=this.w,t.stroke(),t.closePath()}}var c=function(t,i){return Math.random()*(i-t)+t};let v=class extends n["d"]{mounted(){this.fireworks=new r(this.$refs.canvas),this.fireworks.start()}beforeDestroy(){this.fireworks.stop()}};v=a["b"]([Object(n["a"])({})],v);var l=v,u=l,w=(s("7ba9"),s("2877")),x=s("5b37"),y=s.n(x),m=Object(w["a"])(u,h,e,!1,null,null,null);"function"===typeof y.a&&y()(m);i["default"]=m.exports},"5b37":function(t,i){},"7ba9":function(t,i,s){"use strict";var h=s("abdc"),e=s.n(h);e.a},abdc:function(t,i,s){}}]);