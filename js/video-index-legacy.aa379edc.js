(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-index"],{"007b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("search-wrap",{attrs:{"default-type":"tencent",types:t.types,"search-handler":t.searchHandler,"get-route-arg":t.getRouteArg},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[n.series?a("div",{class:n.collapsed?"video-list-collapsed":""},t._l(n.series,function(e,n){return a("v-btn",{key:n,attrs:{small:"",to:t.getRouteArg({url:e.url,type:t.type})}},[t._v(t._s(e.name))])}),1):t._e(),n.series?a("div",[a("v-btn",{attrs:{icon:""},on:{click:function(t){n.collapsed=!n.collapsed}}},[t._v(t._s(n.collapsed?"展开":"收缩"))])],1):t._e()]}}])},[a("div",{attrs:{slot:"other"},slot:"other"},t._l(t.recommends,function(e,n){return a("v-card",{key:n},[a("v-card-title",[a("div",{staticClass:"headline orange--text"},[t._v("\n          "+t._s(e.title)+"\n        ")])]),a("v-divider"),a("v-card-text",t._l(e.items,function(e,n){return a("list-item",{key:n,staticClass:"my-1",attrs:{data:e}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{color:"primary",to:e.to}},[a("v-icon",[t._v("play_circle_filled")])],1)],1)],2)}),1)],1)}),1)])},r=[],i=a("a34a"),s=a.n(i),c=a("3040"),o=a("c665"),u=a("dc0a"),l=a("aa9a"),p=a("d328"),d=a("11d9"),f=a("9ab4"),v=a("60a3"),h=a("df56"),y=a("af40"),b=a("cdf7"),m=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(p["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.types=[],t.recommends=[],t}return Object(l["a"])(e,[{key:"created",value:function(){var t=Object(c["a"])(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:Object(b["b"])(this.type).then(function(t){e.recommends=t.map(function(t){return t.items.map(function(t){return Object.assign(t,{to:{name:"video-player",query:{url:t.url,direct:!0,video_only:!0}}})}),t})}),Object(b["d"])().then(function(t){e.types=t});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"searchHandler",value:function(t){return Object(b["a"])(this.type).search(t)}},{key:"getRouteArg",value:function(t){var e=this,a=this.types.find(function(t){return t.value===e.type});return{name:"video-player",query:{url:t.url,direct:!a.direct}}}},{key:"type",get:function(){return this.$route.query.type}}]),Object(u["a"])(e,t),e}(v["d"]);m=f["a"]([Object(v["a"])({components:{SearchWrap:h["a"],ListItem:y["a"]}})],m);var g=m,_=g,x=(a("fb57"),a("2877")),w=Object(x["a"])(_,n,r,!1,null,null,null);w.options.__file="index.vue";e["default"]=w.exports},"0174":function(t,e,a){"use strict";var n=a("3b23"),r=a.n(n);r.a},"2b80":function(t,e,a){},"3b23":function(t,e,a){},"7d65":function(t,e,a){},af40:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",t._b({attrs:{xs12:""}},"v-flex",{sm6:!t.full,md2:!t.full},!1),[a("router-link",{staticClass:"d-block",attrs:{to:t.data.to}},[a("v-img",{attrs:{src:t.data.cover||"","lazy-src":"https://img.imjad.cn/images/2019/02/15/330720-140F40QG761.jpg",width:"100%","aspect-ratio":1.3}},[t._t("img-text")],2)],1)],1),a("v-flex",t._b({attrs:{xs12:""}},"v-flex",{sm6:!t.full,md10:!t.full},!1),[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[t.data.title?a("div",{staticClass:"headline text-ellipse"},[a("router-link",{attrs:{to:t.data.to,title:t.data.title}},[t._v("\n              "+t._s(t.data.title)+"\n            ")])],1):t._e(),t.data.desc?a("div",{staticClass:"grey--text",domProps:{innerHTML:t._s(t.data.desc)}}):t._e(),t._t("default")],2)]),a("v-card-actions",[t._t("actions")],2)],1)],1)],1)},r=[],i=a("c665"),s=a("dc0a"),c=a("d328"),o=a("11d9"),u=a("9ab4"),l=a("60a3"),p=function(t){function e(){return Object(i["a"])(this,e),Object(c["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(s["a"])(e,t),e}(l["d"]);u["a"]([Object(l["c"])()],p.prototype,"data",void 0),u["a"]([Object(l["c"])()],p.prototype,"full",void 0),u["a"]([Object(l["c"])({default:200,type:Number})],p.prototype,"imgWidth",void 0),p=u["a"]([Object(l["a"])({})],p);var d=p,f=d,v=(a("0174"),a("2877")),h=Object(v["a"])(f,n,r,!1,null,null,null);h.options.__file="ListItem.vue";e["a"]=h.exports},cdf7:function(t,e,a){"use strict";a.d(e,"a",function(){return b}),a.d(e,"c",function(){return m}),a.d(e,"b",function(){return g}),a.d(e,"d",function(){return x});var n=a("a34a"),r=a.n(n),i=a("6eec"),s=a("3040"),c=a("bc3a"),o=a.n(c),u=a("9530"),l=a.n(u),p=a("53b8");function d(){var t=Object(i["a"])(["\n        query {\n          videoSites {\n            text\n            value\n            indirect\n          }\n        }\n      "]);return d=function(){return t},t}function f(){var t=Object(i["a"])(["query ($url: String!) {\n        video(url:$url) {\n          title\n          type\n          cover\n          url\n          desc\n          rate\n          series\n          nodirect\n        }\n      }"]);return f=function(){return t},t}function v(){var t=Object(i["a"])(["query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }"]);return v=function(){return t},t}var h={search:function(){var t=Object(s["a"])(r.a.mark(function t(e){var a,n;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].query({query:l()(v()),variables:e});case 2:return a=t.sent,n=a.data.videoSearch,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),info:function(){var t=Object(s["a"])(r.a.mark(function t(e){var a,n;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].query({query:l()(f()),variables:e});case 2:return a=t.sent,n=a.data.video,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},y={search:function(){var t=Object(s["a"])(r.a.mark(function t(e){var a,n,i,s,c;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("https://api.imjad.cn/bilibili/v2/",{params:{get:"search",keyword:e.kw,page:e.page}});case 2:if(a=t.sent,n=a.data,i=n.code,s=n.data,c=n.message,0===i){t.next=9;break}throw new Error(c);case 9:return t.abrupt("return",{page:s.page,pages:-1,items:s.items.archive.map(function(t){return t.url="https://www.bilibili.com/video/".concat(t.goto).concat(t.param),t})});case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),info:function(){var t=Object(s["a"])(r.a.mark(function t(e){return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("暂无数据");case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()};function b(t){return"bilibili"===t?y:h}function m(t){return t.startsWith("https://www.bilibili.com")?y:h}function g(t){return _.apply(this,arguments)}function _(){return _=Object(s["a"])(r.a.mark(function t(e){var a,n,i,s;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("https://api.apiopen.top/todayVideo");case 2:return a=t.sent,n=a.data,s=[],n.result.forEach(function(t){var e=t.data;"textCard"!==t.type?(e=e.content.data,e.playUrl&&i.items.push({title:e.title,cover:e.cover.detail,desc:e.description,url:e.playUrl})):i&&i.title===e.text||(i={title:e.text,items:[]},s.push(i))}),t.abrupt("return",s.filter(function(t){return t.items.length>0}));case 7:case"end":return t.stop()}},t,this)})),_.apply(this,arguments)}function x(){return w.apply(this,arguments)}function w(){return w=Object(s["a"])(r.a.mark(function t(){var e,a;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].query({query:l()(d())});case 2:return e=t.sent,a=e.data.videoSites,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)})),w.apply(this,arguments)}},cf5c:function(t,e,a){"use strict";var n=a("7d65"),r=a.n(n);r.a},df56:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-xs":"","grid-list-md":""}},[a("v-layout",[a("div",[a("v-autocomplete",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search",loading:t.loading,autofocus:""},on:{"click:append":function(e){t.onSearch(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t.loading?a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1):t.keyword?t.error_text?a("div",{staticClass:"text-xs-center grey--text"},[t._v("\n    "+t._s(t.error_text)+"\n    "),a("v-btn",{attrs:{small:"",color:"error",flat:""},on:{click:t.search}},[t._v("重试")])],1):a("div",[a("v-layout",[a("v-flex",[t._v("\n        搜索结果 "+t._s(0===t.contents.length?"无":"")+"\n      ")]),a("v-btn",{attrs:{icon:"",title:"刷新"},on:{click:t.search}},[a("v-icon",[t._v("refresh")])],1),a("v-btn",{staticClass:"hidden-xs-only",attrs:{icon:""},on:{click:t.layout}},[a("v-icon",[t._v(t._s(t.full?"list":"grid_on"))])],1)],1),a("v-layout",[a("v-slide-y-transition",{staticStyle:{"flex-wrap":"wrap",display:"flex"},attrs:{group:""}},t._l(t.contents,function(e,n){return a("v-flex",t._b({key:n,attrs:{data:e,xs12:"","d-flex":""}},"v-flex",{sm6:t.full,md4:t.full,lg3:t.full,xl2:t.full},!1),[a("list-item",{attrs:{full:t.full,data:e}},[t.full?t._e():t._t("default",null,{item:e}),e.type?a("span",{staticClass:"blue white--text px-1",attrs:{slot:"img-text"},slot:"img-text"},[t._v("\n              "+t._s(e.type)+"\n            ")]):t._e(),a("template",{slot:"actions"},[a("v-btn",{attrs:{color:"primary",to:e.to}},[a("v-icon",[t._v("play_circle_filled")])],1),t._t("actions",null,{item:e})],2)],2)],1)}),1)],1),a("div",{staticClass:"text-xs-center"},[t.total_page>0?a("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){t.onSearch(!1)}},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t.total_page<0?a("div",[a("v-btn",{attrs:{disabled:t.page<=1},on:{click:function(e){t.toPage(t.page-1)}}},[t._v("上一页")]),a("v-btn",{on:{click:function(e){t.toPage(t.page+1)}}},[t._v("下一页")])],1):t._e()],1)],1):t._t("other")],2)},r=[],i=a("a34a"),s=a.n(i),c=a("3040"),o=a("c665"),u=a("dc0a"),l=a("aa9a"),p=a("d328"),d=a("11d9"),f=a("9ab4"),v=a("60a3"),h=a("af40"),y=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(p["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.contents=[],t.keyword="",t.type="",t.page=1,t.limit=20,t.full=!1,t.loading=!1,t.total_page=0,t.error_text="",t}return Object(l["a"])(e,[{key:"beforeRouteUpdate",value:function(){this.syncParams(),this.keyword&&this.search()}},{key:"syncParams",value:function(){var t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.page=Number(t.page)||1,this.type=t.type||this.defaultType}},{key:"onTypeChange",value:function(){this.keyword&&this.onSearch(!0)}},{key:"onSearch",value:function(t){t&&(this.page=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,page:String(this.page),limit:String(this.limit),type:this.type}})}},{key:"search",value:function(){var t=Object(c["a"])(s.a.mark(function t(){var e,a,n,r=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.contents=[],t.prev=2,t.next=5,this.searchHandler({kw:this.keyword,page:this.page,type:this.type});case 5:e=t.sent,a=e.pages,n=e.items,this.total_page=a,this.contents=n.map(function(t){return t.collapsed=!0,t.to=r.getRouteArg(t),t}),this.error_text="",t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),this.error_text=t.t0.message;case 16:this.loading=!1;case 17:case"end":return t.stop()}},t,this,[[2,13]])}));return function(){return t.apply(this,arguments)}}()},{key:"toPage",value:function(t){this.page=t,this.onSearch(!1)}},{key:"layout",value:function(){this.full=!this.full,this.$emit("layout",this.full)}}]),Object(u["a"])(e,t),e}(v["d"]);f["a"]([Object(v["c"])()],y.prototype,"types",void 0),f["a"]([Object(v["c"])(Function)],y.prototype,"searchHandler",void 0),f["a"]([Object(v["c"])()],y.prototype,"defaultType",void 0),f["a"]([Object(v["c"])()],y.prototype,"getRouteArg",void 0),f["a"]([Object(v["e"])("$route",{immediate:!0})],y.prototype,"beforeRouteUpdate",null),y=f["a"]([Object(v["a"])({components:{ListItem:h["a"]}})],y);var b=y,m=b,g=(a("cf5c"),a("2877")),_=Object(g["a"])(m,n,r,!1,null,null,null);_.options.__file="SearchWrap.vue";e["a"]=_.exports},fb57:function(t,e,a){"use strict";var n=a("2b80"),r=a.n(n);r.a}}]);