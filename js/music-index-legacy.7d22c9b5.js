(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music-index"],{"2c53":function(t,e,a){},"2f34":function(t,e,a){"use strict";var n=a("2c53"),r=a.n(n);r.a},3272:function(t,e,a){"use strict";a.d(e,"a",function(){return m});var n=a("6eec"),r=a("9393"),c=a("a34a"),i=a.n(c),o=a("3040"),s=a("bc3a"),u=a.n(s),l=a("4758"),p=a("9530"),f=a.n(p),h=a("53b8");function d(){var t=Object(n["a"])(["query ($kw: String!,$type:String!, $page:Int) {\n        musicSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }"]);return d=function(){return t},t}var v={search:function(){var t=Object(o["a"])(i.a.mark(function t(e,a){var n,r,c,o;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("https://api.imjad.cn/cloudmusic/",{params:{type:"search",s:e,offset:a}});case 2:if(n=t.sent,r=n.data,200===r.code){t.next=6;break}throw new Error("加载失败...");case 6:return c=r.result.songCount,o=r.result.songs.map(function(t){return{singer:t.ar[0].name,cover:t.al.picUrl,title:t.al.name,arName:t.name,id:t.id,mv:t.mv}}),t.abrupt("return",{page:a+1,pages:Math.ceil(c/20),items:o});case 9:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),getUrl:function(t){return u.a.get("https://api.imjad.cn/cloudmusic/?type=song&br=128000&id=".concat(t)).then(function(t){var e=Object(r["a"])(t.data.data,1),a=e[0].url;if(!a)throw new Error("抱歉，该歌曲不存在");return a})},getLyric:function(t){return u.a.get("https://api.imjad.cn/cloudmusic/?type=lyric&br=128000&id=".concat(t)).then(function(t){var e=t.data;if(200!==e.code)throw new Error(e);if(e.nolyric||!e.lrc)throw new Error("无歌词");return e.lrc.lyric})},getRecoms:function(){throw new Error("暂无功能")},getHotKey:function(){throw new Error("暂无功能")},getSmartbox:function(t){throw new Error("暂无功能")},getMvUrl:function(t){return u.a.get("https://api.imjad.cn/cloudmusic/?type=mv&br=128000&id=".concat(t)).then(function(t){var e=t.data,a=e.data,n=e.code;if(200!==n)throw new Error("抱歉，没有找到该mv");return{cover:a.cover,url:a.brs[Object.keys(a.brs)[0]]}})}},y={search:function(){var t=Object(o["a"])(i.a.mark(function t(e,a,n){var r,c,o,s,u;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].query({query:f()(d()),variables:{kw:e,page:a,type:n}});case 2:return r=t.sent,c=r.data.musicSearch,o=c.page,s=c.pages,u=c.items,t.abrupt("return",{page:o,pages:s,items:u});case 8:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),getLyric:function(t){throw new Error("暂无功能")},getUrl:function(t){throw new Error("暂无功能")},getRecoms:function(){throw new Error("暂无功能")},getHotKey:function(){throw new Error("暂无功能")},getSmartbox:function(t){throw new Error("暂无功能")},getMvUrl:function(t){throw new Error("暂无功能")}};(function(){var t=Object(o["a"])(i.a.mark(function t(e,a){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("暂无功能");case 1:case"end":return t.stop()}},t,this)}))})(),function(){var t=Object(o["a"])(i.a.mark(function t(){var e,a;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])("https://u.y.qq.com/cgi-bin/musicu.fcg?data={%22comm%22:{%22ct%22:24},%22recomPlaylist%22:{%22method%22:%22get_hot_recommend%22,%22param%22:{%22async%22:1,%22cmd%22:2},%22module%22:%22playlist.HotRecommendServer%22},%22playlist%22:{%22method%22:%22get_playlist_by_category%22,%22param%22:{%22id%22:8,%22curPage%22:1,%22size%22:40,%22order%22:5,%22titleid%22:8},%22module%22:%22playlist.PlayListPlazaServer%22},%22new_album%22:{%22module%22:%22music.web_album_library%22,%22method%22:%22get_album_by_tags%22,%22param%22:{%22area%22:7,%22company%22:-1,%22genre%22:-1,%22type%22:-1,%22year%22:-1,%22sort%22:2,%22get_tags%22:1,%22sin%22:0,%22num%22:40,%22click_albumid%22:0}},%22toplist%22:{%22module%22:%22music.web_toplist_svr%22,%22method%22:%22get_toplist_index%22,%22param%22:{}}}");case 2:return e=t.sent,a=e.recomPlaylist.data.v_hot,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}))}(),function(){var t=Object(o["a"])(i.a.mark(function t(){var e,a;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg?","jsonpCallback");case 2:return e=t.sent,a=e.data.hotkey,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}))}(),function(){var t=Object(o["a"])(i.a.mark(function t(e){var a,n;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])("https://c.y.qq.com/splcloud/fcgi-bin/smartbox_new.fcg?&key=".concat(encodeURIComponent(e)),"jsonpCallback");case 2:return a=t.sent,n=a.data.song.itemlist,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}))}();function m(t){return"wangyiyun"===t?v:y}},"7d65":function(t,e,a){},aa6a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("search-wrap",{attrs:{"default-type":"wangyiyun",types:t.types,"search-handler":t.searchHandler},on:{play:t.toPlay},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return a("div",{staticClass:"grey--text"},[t._v("\n    歌手："+t._s(n.singer)+"\n    "),n.arName?[t._v("\n      专辑："+t._s(n.arName)+"\n    ")]:t._e()],2)}},{key:"actions",fn:function(e){var n=e.item;return n.mv?a("v-btn",{attrs:{color:"blue"},on:{click:function(e){t.toPlayMv(n)}}},[a("v-icon",[t._v("videocam")]),t._v("\n    MV\n  ")],1):t._e()}}])})},r=[],c=a("a34a"),i=a.n(c),o=a("3040"),s=a("c665"),u=a("dc0a"),l=a("aa9a"),p=a("d328"),f=a("11d9"),h=a("9ab4"),d=a("60a3"),v=a("3272"),y=a("df56"),m=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(p["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.types=[],t}return Object(l["a"])(e,[{key:"created",value:function(){this.types=[{value:"wangyiyun",text:"网易云音乐"},{value:"qq",text:"QQ音乐"},{value:"kuwo",text:"酷我"},{value:"netease",text:"网易"},{value:"xiami",text:"虾米"},{value:"kugou",text:"酷狗"},{value:"baidu",text:"百度"},{value:"1ting",text:"一听"},{value:"migu",text:"咪咕"},{value:"lizhi",text:"荔枝"},{value:"qingting",text:"蜻蜓"},{value:"ximalaya",text:"喜马拉雅"},{value:"kg",text:"全民K歌"},{value:"5singyc",text:"5sing原创"},{value:"5singfc",text:"5sing翻唱"}]}},{key:"searchHandler",value:function(){var t=Object(o["a"])(i.a.mark(function t(e){var a,n,r;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.type,n=e.kw,r=e.page,t.abrupt("return",Object(v["a"])(a).search(n,r,a));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"toPlay",value:function(t){this.$router.push({name:"music-id",params:{id:t.id},query:{url:t.url,type:this.type}})}},{key:"toPlayMv",value:function(){var t=Object(o["a"])(i.a.mark(function t(e){var a;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["a"])(this.type).getMvUrl(e.mv);case 2:a=t.sent,this.$router.push({name:"music-mv",query:a});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"type",get:function(){return this.$route.query.type}}]),Object(u["a"])(e,t),e}(d["d"]);m=h["a"]([Object(d["a"])({components:{SearchWrap:y["a"]}})],m);var g=m,w=g,b=(a("2f34"),a("2877")),k=Object(b["a"])(w,n,r,!1,null,null,null);k.options.__file="index.vue";e["default"]=k.exports},cf5c:function(t,e,a){"use strict";var n=a("7d65"),r=a.n(n);r.a},df56:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",[a("div",[a("v-select",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search",loading:t.loading},on:{"click:append":function(e){t.onSearch(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t.loading?a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1):a("div",[t._v("\n    搜索结果\n    "),a("v-layout",{attrs:{wrap:""}},t._l(t.contents,function(e,n){return a("v-flex",{key:n,staticClass:"my-1",attrs:{xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-layout",[a("div",[a("v-img",{attrs:{src:e.cover,width:"200","aspect-ratio":1.3}})],1),a("v-flex",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),t._t("default",null,{item:e})],2)]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},on:{click:function(a){t.play(e)}}},[a("v-icon",[t._v("play_circle_filled")])],1),t._t("actions",null,{item:e})],2)],1)],1)],1)],1)}),1),a("div",{staticClass:"text-xs-center"},[t.total_page>0?a("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){t.onSearch(!1)}},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}}):t.total_page<0?a("div",[a("v-btn",{attrs:{disabled:t.offset<=1},on:{click:function(e){t.toPage(t.offset-1)}}},[t._v("上一页")]),a("v-btn",{on:{click:function(e){t.toPage(t.offset+1)}}},[t._v("下一页")])],1):t._e()],1)],1)],1)},r=[],c=a("a34a"),i=a.n(c),o=a("3040"),s=a("c665"),u=a("dc0a"),l=a("aa9a"),p=a("d328"),f=a("11d9"),h=a("9ab4"),d=a("60a3"),v=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(p["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.contents=[],t.keyword="",t.type="",t.offset=1,t.limit=20,t.loading=!1,t.total_page=0,t}return Object(l["a"])(e,[{key:"beforeRouteUpdate",value:function(){this.syncParams(),this.keyword&&this.search()}},{key:"syncParams",value:function(){var t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.offset=Number(t.offset)||1,this.type=t.type||this.defaultType}},{key:"onTypeChange",value:function(){this.keyword&&this.onSearch(!0)}},{key:"onSearch",value:function(t){t&&(this.offset=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,offset:String(this.offset),limit:String(this.limit),type:this.type}})}},{key:"search",value:function(){var t=Object(o["a"])(i.a.mark(function t(){var e,a,n;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.searchHandler({kw:this.keyword,page:this.offset-1,type:this.type});case 4:e=t.sent,a=e.pages,n=e.items,this.total_page=a,this.contents=n.map(function(t){return t.collapsed=!0,t}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),this.$toast(t.t0.message);case 14:this.loading=!1;case 15:case"end":return t.stop()}},t,this,[[1,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"play",value:function(t){}},{key:"toPage",value:function(t){this.offset=t,this.onSearch(!1)}}]),Object(u["a"])(e,t),e}(d["d"]);h["a"]([Object(d["c"])()],v.prototype,"types",void 0),h["a"]([Object(d["c"])(Function)],v.prototype,"searchHandler",void 0),h["a"]([Object(d["c"])()],v.prototype,"defaultType",void 0),h["a"]([Object(d["e"])("$route",{immediate:!0})],v.prototype,"beforeRouteUpdate",null),h["a"]([Object(d["b"])()],v.prototype,"play",null),v=h["a"]([Object(d["a"])({})],v);var y=v,m=y,g=(a("cf5c"),a("2877")),w=Object(g["a"])(m,n,r,!1,null,null,null);w.options.__file="SearchWrap.vue";e["a"]=w.exports}}]);