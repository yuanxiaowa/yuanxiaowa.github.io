(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-player"],{"55f4":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"video-wrap"},[t.t_direct?!t.loading&&t.info&&t.info.url?[t.error_text?r("div",{staticClass:"text-xs-center"},[t._v("\n      出错了\n      "),r("v-btn",{attrs:{color:"red--text"},on:{click:t.reload}},[t._v("重试")])],1):t.need_dplayer?r("video-player",{attrs:{src:t.info.url},on:{error:t.onError}}):r("video",{staticStyle:{width:"100%"},attrs:{crossorigin:"anonymous",src:t.info.url,controls:""}})]:t._e():r("iframe",{attrs:{width:"100%",height:"100%",src:t.url,frameborder:"0",allowfullscreen:""}}),r("div",{staticClass:"ma-2"},[t.direct?t._e():r("v-select",{attrs:{items:t.items,dense:""},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}}),t.loading?r("div",[r("v-progress-circular",{attrs:{color:"primary",indeterminate:""}}),t._v("\n      正在获取数据...\n    ")],1):t.info?r("div",[r("v-layout",[r("h3",[t._v(t._s(t.info.title))]),r("v-spacer"),r("a",{attrs:{href:t.play_url,target:"_blank"}},[t._v("到源网站播放")])],1),r("div",{staticClass:"gray--text",domProps:{innerHTML:t._s(t.info.desc)}}),t.info.series?r("div",{staticClass:"mt-2"},[r("b",[t._v(t._s(t.info.series.title)+"剧集列表：")]),r("div",t._l(t.info.series.items,function(e,n){return r("v-btn",{key:n,attrs:{color:e.url===t.play_url?"primary--text":void 0,to:{query:{url:e.url,direct:String(t.direct)}}}},[t._v(t._s(e.title))])}),1)]):t._e()],1):t._e()],1)],2)},a=[],i=r("a34a"),u=r.n(i),c=r("6eec"),o=r("3040"),s=r("c665"),l=r("dc0a"),p=r("aa9a"),d=r("d328"),f=r("11d9"),v=r("9ab4"),h=r("60a3"),y=r("cdf7"),b=r("5912"),w=r("9530"),m=r.n(w),_=r("4bb5");function g(){var t=Object(c["a"])(["\n          query {\n            videoResolvers {\n              id\n              text\n              value\n            }\n          }\n        "]);return g=function(){return t},t}var x=Object(_["e"])("music"),k=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(d["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.items=[],t.source="http://jqaaa.com/jx.php",t.info=null,t.loading=!1,t.error_text="",t.t_direct=!0,t.play_url="",t}return Object(p["a"])(e,[{key:"created",value:function(){var t=Object(o["a"])(u.a.mark(function t(){var e,r;return u.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$route.query.type){t.next=6;break}return t.next=3,this.$apollo.query({query:m()(g())});case 3:e=t.sent,r=e.data.videoResolvers,this.items=r;case 6:this.setPlaying(!1);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"beforeRouteUpdate",value:function(){var t=this;this.t_direct=this.direct,this.$route.query.video_only?this.info={url:this.$route.query.url}:(this.loading=!0,this.play_url=this.$route.query.url,Object(y["c"])(this.play_url).info({url:this.play_url}).then(function(e){t.info=e,e.nodirect&&(t.t_direct=!1,t.play_url=e.url),t.error_text=""}).finally(function(){t.loading=!1}))}},{key:"onError",value:function(t){}},{key:"reload",value:function(){location.reload()}},{key:"direct",get:function(){return Boolean(this.$route.query.direct)}},{key:"url",get:function(){return"".concat(this.source,"?url=").concat(encodeURIComponent(this.play_url))}},{key:"need_dplayer",get:function(){var t=this;return![].some(function(e){return t.info.url.startsWith(e)})}}]),Object(l["a"])(e,t),e}(h["d"]);v["a"]([x.Mutation],k.prototype,"setPlaying",void 0),v["a"]([Object(h["e"])("$route",{immediate:!0})],k.prototype,"beforeRouteUpdate",null),k=v["a"]([Object(h["a"])({components:{VideoPlayer:b["a"]}})],k);var j=k,O=j,q=(r("a97b"),r("2877")),$=Object(q["a"])(O,n,a,!1,null,null,null);$.options.__file="player.vue";e["default"]=$.exports},a97b:function(t,e,r){"use strict";var n=r("ddfc"),a=r.n(n);a.a},cdf7:function(t,e,r){"use strict";r.d(e,"a",function(){return b}),r.d(e,"c",function(){return w}),r.d(e,"b",function(){return m}),r.d(e,"d",function(){return g});var n=r("a34a"),a=r.n(n),i=r("6eec"),u=r("3040"),c=r("bc3a"),o=r.n(c),s=r("9530"),l=r.n(s),p=r("53b8");function d(){var t=Object(i["a"])(["\n        query {\n          videoSites {\n            text\n            value\n            indirect\n          }\n        }\n      "]);return d=function(){return t},t}function f(){var t=Object(i["a"])(["query ($url: String!) {\n        video(url:$url) {\n          title\n          type\n          cover\n          url\n          desc\n          rate\n          series\n          nodirect\n        }\n      }"]);return f=function(){return t},t}function v(){var t=Object(i["a"])(["query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }"]);return v=function(){return t},t}var h={search:function(){var t=Object(u["a"])(a.a.mark(function t(e){var r,n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].query({query:l()(v()),variables:e});case 2:return r=t.sent,n=r.data.videoSearch,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),info:function(){var t=Object(u["a"])(a.a.mark(function t(e){var r,n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].query({query:l()(f()),variables:e});case 2:return r=t.sent,n=r.data.video,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},y={search:function(){var t=Object(u["a"])(a.a.mark(function t(e){var r,n,i,u,c;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("https://api.imjad.cn/bilibili/v2/",{params:{get:"search",keyword:e.kw,page:e.page}});case 2:if(r=t.sent,n=r.data,i=n.code,u=n.data,c=n.message,0===i){t.next=9;break}throw new Error(c);case 9:return t.abrupt("return",{page:u.page,pages:-1,items:u.items.archive.map(function(t){return t.url="https://www.bilibili.com/video/".concat(t.goto).concat(t.param),t})});case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),info:function(){var t=Object(u["a"])(a.a.mark(function t(e){return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("暂无数据");case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()};function b(t){return"bilibili"===t?y:h}function w(t){return t.startsWith("https://www.bilibili.com")?y:h}function m(t){return _.apply(this,arguments)}function _(){return _=Object(u["a"])(a.a.mark(function t(e){var r,n,i,u;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("https://api.apiopen.top/todayVideo");case 2:return r=t.sent,n=r.data,u=[],n.result.forEach(function(t){var e=t.data;"textCard"!==t.type?(e=e.content.data,e.playUrl&&i.items.push({title:e.title,cover:e.cover.detail,desc:e.description,url:e.playUrl})):i&&i.title===e.text||(i={title:e.text,items:[]},u.push(i))}),t.abrupt("return",u.filter(function(t){return t.items.length>0}));case 7:case"end":return t.stop()}},t,this)})),_.apply(this,arguments)}function g(){return x.apply(this,arguments)}function x(){return x=Object(u["a"])(a.a.mark(function t(){var e,r;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].query({query:l()(d())});case 2:return e=t.sent,r=e.data.videoSites,t.abrupt("return",r);case 5:case"end":return t.stop()}},t,this)})),x.apply(this,arguments)}},ddfc:function(t,e,r){}}]);