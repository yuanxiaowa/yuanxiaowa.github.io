(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music-id"],{3272:function(t,e,r){"use strict";r.d(e,"a",function(){return m}),r.d(e,"b",function(){return g}),r.d(e,"c",function(){return w});var n=r("bc3a"),i=r.n(n),a=(r("4758"),r("9530")),o=r.n(a),u=r("53b8");function s(t,e){return f(t)||l(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)if(r.push(o.value),e&&r.length===e)break}catch(s){i=!0,a=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw a}}return r}function f(t){if(Array.isArray(t))return t}function p(t,e){return`歌手：${t} ${e?` &nbsp; 专辑：${e}`:""}`}const h={async search(t,e){var r=await i.a.get("https://api.imjad.cn/cloudmusic/",{params:{type:"search",s:t,offset:e}}),n=r.data;if(200!==n.code)throw new Error("加载失败...");var a=n.result.songCount,o=n.result.songs.map(t=>({author:t.ar[0].name,cover:t.al.picUrl,title:t.al.name,arName:t.name,id:t.id,mv:t.mv,desc:p(t.ar[0].name,t.name)}));return{page:e+1,pages:Math.ceil(a/20),items:o}},getUrl(t){return i.a.get(`https://api.imjad.cn/cloudmusic/?type=song&br=128000&id=${t}`).then(t=>{let e=s(t.data.data,1),r=e[0].url;if(!r)throw new Error("抱歉，该歌曲不存在");return r})},getLyric(t){return i.a.get(`https://api.imjad.cn/cloudmusic/?type=lyric&br=128000&id=${t}`).then(t=>{let e=t.data;if(200!==e.code)throw new Error(e);if(e.nolyric||!e.lrc)throw new Error("无歌词");return e.lrc.lyric})},getRecoms(){throw new Error("暂无功能")},getHotKey(){throw new Error("暂无功能")},getSmartbox(t){throw new Error("暂无功能")},getMvUrl(t){return i.a.get(`https://api.imjad.cn/cloudmusic/?type=mv&br=128000&id=${t}`).then(t=>{let e=t.data,r=e.data,n=e.code;if(200!==n)throw new Error("抱歉，没有找到该mv");return{cover:r.cover,url:r.brs[Object.keys(r.brs)[0]]}})}},y={async search(t,e,r){var n=await u["a"].query({query:o.a`query ($kw: String!,$type:String!, $page:Int) {
        musicSearch(kw:$kw, type:$type,page:$page) {
          page
          pages
          items
        }
      }`,variables:{kw:t,page:e,type:r}}),i=n.data.musicSearch,a=i.page,s=i.pages,c=i.items;return{page:a,pages:s,items:c}},getLyric(t){throw new Error("暂无功能")},getUrl(t){throw new Error("暂无功能")},getRecoms(){throw new Error("暂无功能")},getHotKey(){throw new Error("暂无功能")},getSmartbox(t){throw new Error("暂无功能")},getMvUrl(t){throw new Error("暂无功能")}},d={async search(t,e){var r=await i.a.get("https://api.apiopen.top/searchMusic",{params:{name:t}}),n=r.data,a=n.result.map(t=>Object.assign(t,{cover:t.pic,type:"",id:t.songid}));return{page:1,pages:1,items:a}},getUrl(t){return i.a.get(`https://api.apiopen.top/musicDetails?id=${t}`).then(t=>{let e=s(t.data.result.songList,1),r=e[0].songLink;if(!r)throw new Error("抱歉，该歌曲不存在");return r})},async getLyric(t){var e=await i.a.get(`https://api.apiopen.top/musicDetails?id=${t}`).then(t=>{let e=s(t.data.result.songList,1),r=e[0].lrcLink;return r}),r=await i.a.get(e),n=r.data;return n},getRecoms(){throw new Error("暂无功能")},getHotKey(){throw new Error("暂无功能")},getSmartbox(t){throw new Error("暂无功能")},getMvUrl(t){throw new Error("暂无功能")}},v={wangyiyun:h,qqjt:d};function m(t){return v[t]||y}async function g(t){var e=await u["a"].query({query:o.a`
      query($type:String!) {
        musicRecomms(type:$type)
      }
    `,variables:{type:t}}),r=e.data.musicRecomms;return r}async function w(){var t=await u["a"].query({query:o.a`
      query {
        musicSites {
          text
          value
        }
      }
    `}),e=t.data.musicSites;return e}},"3c75":function(t,e,r){(function(e,r){t.exports=r()})(0,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=20)}([function(t,e,r){t.exports=!r(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(11),i=r(16),a=r(18),o=Object.defineProperty;e.f=r(0)?Object.defineProperty:function(t,e,r){if(n(t),e=a(e,!0),n(r),i)try{return o(t,e,r)}catch(u){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";e.__esModule=!0;var n=r(8),i=a(n);function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e,r){t.exports={default:r(9),__esModule:!0}},function(t,e,r){r(19);var n=r(2).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(1);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(10);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(1),i=r(4).document,a=n(i)&&n(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,r){var n=r(4),i=r(2),a=r(12),o=r(15),u="prototype",s=function(t,e,r){var c,l,f,p=t&s.F,h=t&s.G,y=t&s.S,d=t&s.P,v=t&s.B,m=t&s.W,g=h?i:i[e]||(i[e]={}),w=g[u],b=h?n:y?n[e]:(n[e]||{})[u];for(c in h&&(r=e),r)l=!p&&b&&void 0!==b[c],l&&c in g||(f=l?b[c]:r[c],g[c]=h&&"function"!=typeof b[c]?r[c]:v&&l?a(f,n):m&&b[c]==f?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[u]=t[u],e}(f):d&&"function"==typeof f?a(Function.call,f):f,d&&((g.virtual||(g.virtual={}))[c]=f,t&s.R&&w&&!w[c]&&o(w,c,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,r){var n=r(5),i=r(17);t.exports=r(0)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){t.exports=!r(0)&&!r(3)(function(){return 7!=Object.defineProperty(r(13)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(1);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(14);n(n.S+n.F*!r(0),"Object",{defineProperty:r(5).f})},function(t,e,r){var n,i,a;(function(o,u){i=[t,e,r(6),r(7)],n=u,a="function"===typeof n?n.apply(e,i):n,void 0===a||(t.exports=a)})(0,function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(r),a=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var u=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,s=0,c=1,l={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"};function f(){}var p=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;(0,i.default)(this,t),this.lrc=e,this.tags={},this.lines=[],this.handler=r,this.state=s,this.curLine=0,this._init()}return(0,a.default)(t,[{key:"_init",value:function(){this._initTag(),this._initLines()}},{key:"_initTag",value:function(){for(var t in l){var e=this.lrc.match(new RegExp("\\["+l[t]+":([^\\]]*)]","i"));this.tags[t]=e&&e[1]||""}}},{key:"_initLines",value:function(){for(var t=this.lrc.split("\n"),e=0;e<t.length;e++){var r=t[e],n=u.exec(r);if(n){var i=r.replace(u,"").trim();i&&this.lines.push({time:60*n[1]*1e3+1e3*n[2]+10*(n[3]||0),txt:i})}}this.lines.sort(function(t,e){return t.time-e.time})}},{key:"_findCurNum",value:function(t){for(var e=0;e<this.lines.length;e++)if(t<=this.lines[e].time)return e;return this.lines.length-1}},{key:"_callHandler",value:function(t){t<0||this.handler({txt:this.lines[t].txt,lineNum:t})}},{key:"_playRest",value:function(){var t=this,e=this.lines[this.curNum],r=e.time-(+new Date-this.startStamp);this.timer=setTimeout(function(){t._callHandler(t.curNum++),t.curNum<t.lines.length&&t.state===c&&t._playRest()},r)}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];this.lines.length&&(this.state=c,this.curNum=this._findCurNum(t),this.startStamp=+new Date-t,e||this._callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this._playRest()))}},{key:"togglePlay",value:function(){var t=+new Date;this.state===c?(this.stop(),this.pauseStamp=t):(this.state=c,this.play((this.pauseStamp||t)-(this.startStamp||t),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state=s,clearTimeout(this.timer)}},{key:"seek",value:function(t){this.play(t)}}]),t}();e.default=p,t.exports=e["default"]})}])})},5342:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-xs-center"},[t.url&&!t.error_text?r("audio",{ref:"audio",attrs:{src:t.url,controls:"",autoplay:""},on:{timeupdate:t.onUpdate,play:t.onPlay,pause:t.onPause,error:t.onError}}):t.error_text?r("div",{staticClass:"error--text"},[t._v(t._s(t.error_text))]):t._e(),r("div",t._l(t.lyric_lines,function(e,n){return r("div",{key:n,class:n===t.current_line?"primary--text":"",domProps:{innerHTML:t._s(e)}})}),0)])},i=[],a=r("9ab4"),o=r("60a3"),u=r("3c75"),s=r.n(u),c=r("3272"),l=r("4bb5");const f=Object(l["e"])("music");let p=class extends o["d"]{constructor(){super(...arguments),this.url="",this.lyric_lines=[],this.current_line=0,this.error_text=""}async created(){var t=this.$route.params.id,e=this.$route.query,r=e.url,n=e.type;if(r)this.url=r;else{let e=Object(c["a"])(n);e.getUrl(t).then(t=>{this.url=t,this.$nextTick(()=>{this.$refs.audio.play()})},()=>this.$toast("抱歉，歌曲加载失败！！！")),e.getLyric(t).then(t=>{this.lyricer=new s.a(t,this.onLyricUpdate),this.lyric_lines=this.lyricer.lines.map(t=>{let e=t.txt;return e||"&nbsp;"})})}this.setPlaying(!1)}onUpdate(){var t=this.$refs.audio;this.lyricer&&this.lyricer.seek(1e3*t.currentTime)}onLyricUpdate(t){t.txt;let e=t.lineNum;this.current_line=e}onPlay(){this.lyricer&&this.lyricer.play()}onError(){this.error_text="抱歉播放出错了"}onPause(){this.lyricer&&this.lyricer.stop()}};a["b"]([f.Mutation],p.prototype,"setPlaying",void 0),p=a["b"]([Object(o["a"])({})],p);var h=p,y=h,d=r("2877"),v=r("bdb0"),m=r.n(v),g=Object(d["a"])(y,n,i,!1,null,null,null);"function"===typeof m.a&&m()(g);e["default"]=g.exports},bdb0:function(t,e){}}]);