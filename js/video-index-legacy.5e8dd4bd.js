(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-index"],{"007b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("search-wrap",{attrs:{"default-type":"tencent",types:e.types,"search-handler":e.searchHandler,"get-route-arg":e.getRouteArg},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[i.series?n("div",{class:i.collapsed?"video-list-collapsed":""},e._l(i.series,function(t,i){return n("v-btn",{key:i,attrs:{small:"",to:e.getRouteArg({url:t.url,type:e.type})}},[e._v(e._s(t.name))])}),1):e._e(),i.series?n("div",[n("v-btn",{attrs:{icon:""},on:{click:function(e){i.collapsed=!i.collapsed}}},[e._v(e._s(i.collapsed?"展开":"收缩"))])],1):e._e()]}}])},[n("div",{attrs:{slot:"other"},slot:"other"},e._l(e.recommends,function(t,i){return n("v-card",{key:i},[n("v-card-title",[n("div",{staticClass:"headline orange--text"},[e._v("\n          "+e._s(t.title)+"\n        ")])]),n("v-divider"),n("v-card-text",e._l(t.items,function(t,i){return n("list-item",{key:i,staticClass:"my-1",attrs:{data:t}},[n("template",{slot:"actions"},[n("v-btn",{attrs:{color:"primary",to:t.to}},[n("v-icon",[e._v("play_circle_filled")])],1)],1)],2)}),1)],1)}),1)])},r=[],a=n("4795"),o=n.n(a),u=n("9ab4"),s=n("60a3"),l=n("df56"),c=n("af40"),d=n("cdf7");function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(i,r)}function v(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){f(a,i,r,o,u,"next",e)}function u(e){f(a,i,r,o,u,"throw",e)}o(void 0)})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function b(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}var x=function(e){function t(){var e;return y(this,t),e=b(this,g(t).apply(this,arguments)),e.types=[],e.recommends=[],e}return w(t,e),h(t,[{key:"created",value:function(){var e=v(o.a.mark(function e(){var t=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:Object(d["b"])(this.type).then(function(e){t.recommends=e.map(function(e){return e.items.map(function(e){return Object.assign(e,{to:{name:"video-player",query:{url:e.url,direct:!0,video_only:!0}}})}),e})}),Object(d["d"])().then(function(e){t.types=e});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"searchHandler",value:function(e){return Object(d["a"])(this.type).search(e)}},{key:"getRouteArg",value:function(e){var t=this,n=this.types.find(function(e){return e.value===t.type});return{name:"video-player",query:{url:e.url,direct:!n.direct}}}},{key:"type",get:function(){return this.$route.query.type}}]),t}(s["d"]);x=u["b"]([Object(s["a"])({components:{SearchWrap:l["a"],ListItem:c["a"]}})],x);var S=x,O=S,N=(n("fb57"),n("2877")),j=n("8f0e"),P=n.n(j),q=Object(N["a"])(O,i,r,!1,null,null,null);"function"===typeof P.a&&P()(q);t["default"]=q.exports},5056:function(e,t,n){},"8f0e":function(e,t){},af40:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-layout",{attrs:{wrap:""}},[n("v-flex",e._b({attrs:{xs12:""}},"v-flex",{sm6:!e.full,md2:!e.full},!1),[n("router-link",{staticClass:"d-block",attrs:{to:e.data.to}},[n("v-img",{attrs:{src:e.data.cover||"","lazy-src":"https://img.imjad.cn/images/2019/02/15/330720-140F40QG761.jpg",width:"100%","aspect-ratio":1.3}},[e._t("img-text")],2)],1)],1),n("v-flex",e._b({attrs:{xs12:""}},"v-flex",{sm6:!e.full,md10:!e.full},!1),[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[e.data.title?n("div",{staticClass:"headline text-ellipse"},[n("router-link",{attrs:{to:e.data.to,title:e.data.title}},[e._v("\n              "+e._s(e.data.title)+"\n            ")])],1):e._e(),e.data.desc?n("div",{staticClass:"grey--text",domProps:{innerHTML:e._s(e.data.desc)}}):e._e(),e._t("default")],2)]),n("v-card-actions",[e._t("actions")],2)],1)],1)],1)},r=[],a=n("9ab4"),o=n("60a3");function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var v=function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return p(t,e),t}(o["d"]);a["b"]([Object(o["c"])()],v.prototype,"data",void 0),a["b"]([Object(o["c"])()],v.prototype,"full",void 0),a["b"]([Object(o["c"])({default:200,type:Number})],v.prototype,"imgWidth",void 0),v=a["b"]([Object(o["a"])({})],v);var y=v,m=y,h=n("2877"),b=Object(h["a"])(m,i,r,!1,null,null,null);t["a"]=b.exports},cdf7:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"b",function(){return v}),n.d(t,"d",function(){return m});var i=n("4795"),r=n.n(i),a=n("bc3a"),o=n.n(a),u=n("53b8");function s(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(i,r)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){s(a,i,r,o,u,"next",e)}function u(e){s(a,i,r,o,u,"throw",e)}o(void 0)})}}var c={search:function(){var e=l(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"kw"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"videoSearch"},arguments:[{kind:"Argument",name:{kind:"Name",value:"kw"},value:{kind:"Variable",name:{kind:"Name",value:"kw"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"pages"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:165,source:{body:"query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:t});case 2:return n=e.sent,i=n.data.videoSearch,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),info:function(){var e=l(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"cover"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"desc"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"rate"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"series"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"nodirect"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:194,source:{body:"query ($url: String!) {\n        video(url:$url) {\n          title\n          type\n          cover\n          url\n          desc\n          rate\n          series\n          nodirect\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:t});case 2:return n=e.sent,i=n.data.video,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},d={search:function(){var e=l(r.a.mark(function e(t){var n,i,a,u,s;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("https://api.imjad.cn/bilibili/v2/",{params:{get:"search",keyword:t.kw,page:t.page}});case 2:if(n=e.sent,i=n.data,a=i.code,u=i.data,s=i.message,0===a){e.next=9;break}throw new Error(s);case 9:return e.abrupt("return",{page:u.page,pages:-1,items:u.items.archive.map(function(e){return e.url="https://www.bilibili.com/video/".concat(e.goto).concat(e.param),e})});case 10:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),info:function(){var e=l(r.a.mark(function e(t){return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("暂无数据");case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()};function p(e){return"bilibili"===e?d:c}function f(e){return e.startsWith("https://www.bilibili.com")?d:c}function v(e){return y.apply(this,arguments)}function y(){return y=l(r.a.mark(function e(t){var n,i,a,u;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("https://api.apiopen.top/todayVideo");case 2:return n=e.sent,i=n.data,u=[],i.result.forEach(function(e){var t=e.data;"textCard"!==e.type?(t=t.content.data,t.playUrl&&a.items.push({title:t.title,cover:t.cover.detail,desc:t.description,url:t.playUrl})):a&&a.title===t.text||(a={title:t.text,items:[]},u.push(a))}),e.abrupt("return",u.filter(function(e){return e.items.length>0}));case 7:case"end":return e.stop()}},e)})),y.apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return h=l(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"videoSites"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"text"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"indirect"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:124,source:{body:"\n        query {\n          videoSites {\n            text\n            value\n            indirect\n          }\n        }\n      ",name:"GraphQL request",locationOffset:{line:1,column:1}}}}});case 2:return t=e.sent,n=t.data.videoSites,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),h.apply(this,arguments)}},df56:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","grid-list-xs":"","grid-list-md":""}},[n("v-layout",[n("div",[n("v-autocomplete",{attrs:{items:e.types,placeholder:"来源"},on:{change:e.onTypeChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),n("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search",loading:e.loading,autofocus:""},on:{"click:append":function(t){return e.onSearch(!0)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(!0)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e.loading?n("div",{staticClass:"text-xs-center"},[n("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1):e.keyword?e.error_text?n("div",{staticClass:"text-xs-center grey--text"},[e._v("\n    "+e._s(e.error_text)+"\n    "),n("v-btn",{attrs:{small:"",color:"error",flat:""},on:{click:e.search}},[e._v("重试")])],1):n("div",[n("v-layout",[n("v-flex",[e._v("\n        搜索结果 "+e._s(0===e.contents.length?"无":"")+"\n      ")]),n("v-btn",{attrs:{icon:"",title:"刷新"},on:{click:e.search}},[n("v-icon",[e._v("refresh")])],1),n("v-btn",{staticClass:"hidden-xs-only",attrs:{icon:""},on:{click:e.layout}},[n("v-icon",[e._v(e._s(e.full?"list":"grid_on"))])],1)],1),n("v-layout",[n("v-slide-y-transition",{staticStyle:{"flex-wrap":"wrap",display:"flex"},attrs:{group:""}},e._l(e.contents,function(t,i){return n("v-flex",e._b({key:i,attrs:{data:t,xs12:"","d-flex":""}},"v-flex",{sm6:e.full,md4:e.full,lg3:e.full,xl2:e.full},!1),[n("list-item",{attrs:{full:e.full,data:t}},[e.full?e._e():e._t("default",null,{item:t}),t.type?n("span",{staticClass:"blue white--text px-1",attrs:{slot:"img-text"},slot:"img-text"},[e._v("\n              "+e._s(t.type)+"\n            ")]):e._e(),n("template",{slot:"actions"},[n("v-btn",{attrs:{color:"primary",to:t.to}},[n("v-icon",[e._v("play_circle_filled")])],1),e._t("actions",null,{item:t})],2)],2)],1)}),1)],1),n("div",{staticClass:"text-xs-center"},[e.total_page>0?n("v-pagination",{attrs:{length:e.total_page},on:{input:function(t){return e.onSearch(!1)}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e.total_page<0?n("div",[n("v-btn",{attrs:{disabled:e.page<=1},on:{click:function(t){return e.toPage(e.page-1)}}},[e._v("上一页")]),n("v-btn",{on:{click:function(t){return e.toPage(e.page+1)}}},[e._v("下一页")])],1):e._e()],1)],1):e._t("other")],2)},r=[],a=n("4795"),o=n.n(a),u=n("9ab4"),s=n("60a3"),l=n("af40");function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(i,r)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){d(a,i,r,o,u,"next",e)}function u(e){d(a,i,r,o,u,"throw",e)}o(void 0)})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function m(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var w=function(e){function t(){var e;return f(this,t),e=m(this,b(t).apply(this,arguments)),e.contents=[],e.keyword="",e.type="",e.page=1,e.limit=20,e.full=!1,e.loading=!1,e.total_page=0,e.error_text="",e}return k(t,e),y(t,[{key:"beforeRouteUpdate",value:function(){this.syncParams(),this.keyword&&this.search()}},{key:"syncParams",value:function(){var e=this.$route.query;this.keyword=e.keyword,this.limit=Number(e.limit)||20,this.page=Number(e.page)||1,this.type=e.type||this.defaultType}},{key:"onTypeChange",value:function(){this.keyword&&this.onSearch(!0)}},{key:"onSearch",value:function(e){e&&(this.page=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,page:String(this.page),limit:String(this.limit),type:this.type}})}},{key:"search",value:function(){var e=p(o.a.mark(function e(){var t,n,i,r=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.contents=[],e.prev=2,e.next=5,this.searchHandler({kw:this.keyword,page:this.page,type:this.type});case 5:t=e.sent,n=t.pages,i=t.items,this.total_page=n,this.contents=i.map(function(e){return e.collapsed=!0,e.to=r.getRouteArg(e),e}),this.error_text="",e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),this.error_text=e.t0.message;case 16:this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[2,13]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"toPage",value:function(e){this.page=e,this.onSearch(!1)}},{key:"layout",value:function(){this.full=!this.full,this.$emit("layout",this.full)}}]),t}(s["d"]);u["b"]([Object(s["c"])()],w.prototype,"types",void 0),u["b"]([Object(s["c"])(Function)],w.prototype,"searchHandler",void 0),u["b"]([Object(s["c"])()],w.prototype,"defaultType",void 0),u["b"]([Object(s["c"])()],w.prototype,"getRouteArg",void 0),u["b"]([Object(s["e"])("$route",{immediate:!0})],w.prototype,"beforeRouteUpdate",null),w=u["b"]([Object(s["a"])({components:{ListItem:l["a"]}})],w);var _=w,x=_,S=n("2877"),O=Object(S["a"])(x,i,r,!1,null,null,null);t["a"]=O.exports},fb57:function(e,t,n){"use strict";var i=n("5056"),r=n.n(i);r.a}}]);