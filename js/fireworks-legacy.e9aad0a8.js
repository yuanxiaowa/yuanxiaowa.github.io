(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fireworks"],{"09ee":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"fireworks"},[e("canvas",{ref:"canvas"}),t._m(0)])},n=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"fireworks__title red--text"},[t._v("\n    新年快乐！！！\n    "),e("div",{staticClass:"display-2"},[t._v("Happy New Year!")])])}],o=e("9ab4"),h=e("60a3");function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}var c=function(){function t(i){r(this,t),this.canvas=i,this.ctx=this.canvas.getContext("2d"),this.canvas.height=window.innerHeight,this.canvas.width=window.innerWidth,this.aDots=[],this.aLines=[],this.iMaxDist=170,this.iMinDist=10,this.beat=30,this.drawLine=!1,this.mouse={vx:0,vy:0,px:0,py:0,x:this.canvas.width/2,y:this.canvas.height/2,tm:void 0,moving:!1},this.heartSpeed=30,this.init()}return u(t,[{key:"init",value:function(){this.getGrd(),this.canvas.addEventListener("mousemove",this.updateMouse.bind(this),!1),this.canvas.addEventListener("click",this.toggleLine.bind(this),!1)}},{key:"getGrd",value:function(){this.grd=this.ctx.createLinearGradient(0,0,this.canvas.width,0),this.breakpoint=20;for(var t=0;t<this.breakpoint;t++){var i=.7*window.innerWidth/this.breakpoint*t,e="hsla( "+i+", 100%, 50%, 1 )";this.grd.addColorStop(1/this.breakpoint*t,e)}}},{key:"toggleLine",value:function(){this.drawLine=!this.drawLine}},{key:"buildDot",value:function(){this.aDots.push(new l(this.mouse))}},{key:"updateMouse",value:function(t){this.mouse.moving=!0,clearTimeout(this.mouse.tm),this.mouse.tm=setTimeout(this.mouseStop.bind(this),500),this.mouse.px=this.mouse.x,this.mouse.py=this.mouse.y,this.mouse.x=t.clientX,this.mouse.y=t.clientY,this.mouse.vx=this.mouse.x-this.mouse.px,this.mouse.vy=this.mouse.y-this.mouse.py,this.buildDot(),this.buildDot(),this.buildDot()}},{key:"mouseStop",value:function(){this.mouse.moving=!1}},{key:"getDist",value:function(t,i){var e=t.x-i.x,s=t.y-i.y;return Math.sqrt(e*e+s*s)}},{key:"checkLines",value:function(){this.aLines=[];for(var t=this.aDots.length-1;t>=0;t--)for(var i=this.aDots.length-1;i>t;i--){var e=this.getDist(this.aDots[t],this.aDots[i]);e<this.iMaxDist&&e>this.iMinDist&&this.aDots[t].r+this.aDots[i].r>5.5&&this.aLines.push(new f(this.aDots[t],this.aDots[i],e,this.iMaxDist))}}},{key:"heartBeat",value:function(){for(var t=v(0,window.innerWidth),i=v(0,window.innerHeight),e=0;e<v(50,100);e++)this.aDots.push(new l({x:t,y:i,vx:v(-8,8),vy:v(-5,5)}));this.beat=0}},{key:"drawOverlay",value:function(){this.ctx.globalCompositeOperation="overlay",this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.grd,this.ctx.fill()}},{key:"update",value:function(){for(var t=this.aDots.length-1;t>=0;t--)this.aDots[t].alive?this.aDots[t].update():this.aDots.splice(t,1);this.drawLine&&this.checkLines(),this.beat>=this.heartSpeed&&!this.mouse.moving?this.heartBeat():this.beat++}},{key:"draw",value:function(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="rgba( 1, 0, 0, 1 )",this.ctx.fillRect(0,0,window.innerWidth,window.innerHeight);for(var t=this.aDots.length-1;t>=0;t--)this.aDots[t].draw(this.ctx);if(this.drawLine)for(t=this.aLines.length-1;t>=0;t--)this.aLines[t].draw(this.ctx);this.drawOverlay()}},{key:"run",value:function(){this.update(),this.draw(),this.bRuning&&requestAnimationFrame(this.run.bind(this))}},{key:"start",value:function(){var t=this;this.bRuning=!0,this.run(),this.resizeHandler=function(){t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight,t.getGrd()},window.addEventListener("resize",this.resizeHandler)}},{key:"stop",value:function(){this.bRuning=!1,window.removeEventListener("resize",this.resizeHandler)}}]),t}(),l=function(){function t(i){r(this,t),this.x=i.x,this.y=i.y,this.vx=1.1*v(i.vx-1.5,i.vx+1.5),this.vy=1.1*v(i.vy-1.5,i.vy+1.5),this.r=v(0,4),this.life=v(1,5)*(.3*this.r),this.alive=!0,this.friction=v(.02,.2),this.a=1}return u(t,[{key:"isOut",value:function(){return this.x<0||this.x>window.innerWidth||this.y<0||this.y>window.innerHeight}},{key:"update",value:function(){(this.x<0||this.x>window.innerWidth)&&(this.vx*=-.8),(this.y<0||this.y>window.innerHeight)&&(this.vy*=-.8),this.lx=this.x,this.ly=this.y,this.x+=this.vx,this.y+=this.vy,this.vx>2?this.vx-=this.friction:this.vx<-2&&(this.vx+=this.friction),this.vy>2?this.vy-=this.friction:this.vy<-2&&(this.vy+=this.friction),this.life<=0?this.a<=0?this.alive=!1:this.a-=.09:this.life-=.1}},{key:"draw",value:function(t){t.beginPath(),t.moveTo(this.lx,this.ly),t.lineTo(this.x,this.y),t.strokeStyle="rgba( 255, 255, 255, "+this.a+" )",t.lineWidth=this.r,t.lineCap="round",t.stroke(),t.closePath()}}]),t}(),f=function(){function t(i,e,s,n){r(this,t),this.x1=i.x,this.y1=i.y,this.x2=e.x,this.y2=e.y,this.w=.1,this.size=s,this.mSize=n,this.a=this.getDistAlpha(),this.a=Math.min(i.a,e.a,this.a)}return u(t,[{key:"getDistAlpha",value:function(){var t=100*this.size/this.mSize,i=100-100*t/100;return i/100}},{key:"draw",value:function(t){t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.strokeStyle="rgba( 255, 255, 255, "+2*this.a+" )",t.lineWidth=this.w,t.stroke(),t.closePath()}}]),t}(),v=function(t,i){return Math.random()*(i-t)+t};function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function d(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function w(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function p(t,i,e){return i&&w(t.prototype,i),e&&w(t,e),t}function b(t,i){return!i||"object"!==y(i)&&"function"!==typeof i?m(t):i}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function g(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&k(t,i)}function k(t,i){return k=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},k(t,i)}var D=function(t){function i(){return d(this,i),b(this,x(i).apply(this,arguments))}return g(i,t),p(i,[{key:"mounted",value:function(){this.fireworks=new c(this.$refs.canvas),this.fireworks.start()}},{key:"beforeDestroy",value:function(){this.fireworks.stop()}}]),i}(h["d"]);D=o["b"]([Object(h["a"])({})],D);var L=D,O=L,S=(e("7ba9"),e("2877")),_=e("5b37"),j=e.n(_),C=Object(S["a"])(O,s,n,!1,null,null,null);"function"===typeof j.a&&j()(C);i["default"]=C.exports},"5b37":function(t,i){},"7ba9":function(t,i,e){"use strict";var s=e("abdc"),n=e.n(s);n.a},abdc:function(t,i,e){}}]);