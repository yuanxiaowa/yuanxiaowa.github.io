(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor-id"],{4516:function(e,t,i){"use strict";var n=i("782e"),a=i.n(n);a.a},"782e":function(e,t,i){},"9aa0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("column-layout",{attrs:{width:"300px"},on:{change:e.onLayoutChange}},[i("file-tree",{staticClass:"fill-height",attrs:{slot:"left",path:e.$route.params.id,value:e.selectedFile},on:{input:e.onSelect},slot:"left"}),i("v-layout",{attrs:{"fill-height":"",column:""}},[i("v-toolbar",{attrs:{flat:""}},[i("div",{staticClass:"blue--text"},[e._v(e._s(e.selectedFile)+"\n        "),e.loading?i("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:14,width:1}}):e._e()],1)]),"text"===e.type?i("code-editor",{ref:"editor",staticClass:"flex",attrs:{filename:e.selectedFile},on:{save:e.saveFile},model:{value:e.contents,callback:function(t){e.contents=t},expression:"contents"}}):i("div",{staticClass:"pa-3"},["image"===e.type?i("img",{attrs:{src:e.filePath}}):"video"===e.type?i("video",{attrs:{src:e.filePath}}):"audio"===e.type?i("audio",{attrs:{src:e.filePath}}):e._e(),i("p",[i("a",{attrs:{href:e.filePath}},[e._v(e._s(e.selectedFile))])])])],1)],1)},a=[],s=i("9ab4"),o=i("60a3"),l=i("f16a"),r=i.n(l),d=i("864f"),c=i("b88f"),u=i("4758");const h=["jpg","jpeg","png","gif","ico","svg","webp"],f=["wma","mp3","mdi"],m=["mp4","3gp","ogg","wav"];let v=class extends o["d"]{constructor(){super(...arguments),this.selectedFile="",this.contents="",this.loading=!1,this.type=""}get extName(){return Object(u["b"])(this.selectedFile)}get filePath(){return Object(u["a"])(this.selectedFile)}loadContent(){return this.$axios.get(this.filePath,{responseType:"text"}).then(e=>e.request.responseText)}async onSelect(e){if(e&&e!==this.selectedFile){if(this.loading=!0,this.selectedFile=e,h.includes(this.extName))this.type="image";else if(f.includes(this.extName))this.type="audio";else if(m.includes(this.extName))this.type="video";else{this.type="text";var t=await this.loadContent();this.contents=t}this.loading=!1}}saveFile(){this.$apollo.mutate({mutation:r.a,variables:{path:this.selectedFile,contents:this.contents},update:()=>{this.$toast("保存成功~~~")}})}onLayoutChange(){var e=this.$refs.editor;e&&e.onResize()}};v=s["a"]([Object(o["a"])({components:{CodeEditor:d["a"],ColumnLayout:c["a"]}})],v);var p=v,g=p,y=i("2877"),b=Object(y["a"])(g,n,a,!1,null,null,null);b.options.__file="_id.vue";t["default"]=b.exports},b88f:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{"fill-height":"",column:""}},[i("div",[e._t("top")],2),i("v-layout",[i("div",{ref:"left",style:{flex:"0 0 "+e._w}},[e._t("left")],2),i("div",{staticClass:"vline",on:{mousedown:e.onMousedown}}),i("v-flex",[e._t("default")],2)],1)],1)},a=[],s=i("9ab4"),o=i("60a3");let l=class extends o["d"]{constructor(){super(...arguments),this.startX=0,this.startW=0,this.flag=!1,this.w=0}created(){this.w=this.width}get _w(){return"number"===typeof this.w?this.w+"px":this.w}mounted(){this.w=this.$refs.left.offsetWidth}onMousedown(e){this.startX=e.clientX,this.startW=this.w;var t=()=>{document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",this.onMousemove)};document.addEventListener("mouseup",t),document.addEventListener("mousemove",this.onMousemove)}onMousemove(e){this.w=this.startW+e.clientX-this.startX,console.log(this.w),this.$emit("change")}};s["a"]([Object(o["c"])(String)],l.prototype,"width",void 0),l=s["a"]([Object(o["a"])({})],l);var r=l,d=r,c=(i("4516"),i("2877")),u=Object(c["a"])(d,n,a,!1,null,null,null);u.options.__file="ColumnLayout.vue";t["a"]=u.exports},f16a:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contents"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"saveFile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"contents"},value:{kind:"Variable",name:{kind:"Name",value:"contents"}}}],directives:[]}]}}],loc:{start:0,end:93}};i.loc.source={body:"mutation($path: String!, $contents: String!) {\n  saveFile(path: $path, contents: $contents)\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){n(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){n(e,t)}),e.definitions&&e.definitions.forEach(function(e){n(e,t)})}var a={};(function(){i.definitions.forEach(function(e){if(e.name){var t=new Set;n(e,t),a[e.name.value]=t}})})(),e.exports=i}}]);