(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-index"],{"007b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("search-wrap",{attrs:{"default-type":"tencent",types:t.types,"search-handler":t.searchHandler,"get-route-arg":t.getRouteArg},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[s.series?a("div",{class:s.collapsed?"video-list-collapsed":""},t._l(s.series,function(e,s){return a("v-btn",{key:s,attrs:{small:"",to:t.getRouteArg({url:e.url,type:t.type})}},[t._v(t._s(e.name))])}),1):t._e(),s.series?a("div",[a("v-btn",{attrs:{icon:""},on:{click:function(t){s.collapsed=!s.collapsed}}},[t._v(t._s(s.collapsed?"展开":"收缩"))])],1):t._e()]}}])},[a("div",{attrs:{slot:"other"},slot:"other"},t._l(t.recommends,function(e,s){return a("v-card",{key:s},[a("v-card-title",[a("div",{staticClass:"headline orange--text"},[t._v("\n          "+t._s(e.title)+"\n        ")])]),a("v-divider"),a("v-card-text",t._l(e.items,function(e,s){return a("list-item",{key:s,staticClass:"my-1",attrs:{data:e}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{color:"primary",to:e.to}},[a("v-icon",[t._v("play_circle_filled")])],1)],1)],2)}),1)],1)}),1)])},r=[],i=a("9ab4"),l=a("60a3"),n=a("df56"),o=a("af40"),c=a("cdf7");let d=class extends l["d"]{constructor(){super(...arguments),this.types=[],this.recommends=[]}async created(){Object(c["b"])(this.type).then(t=>{this.recommends=t.map(t=>{return t.items.map(t=>Object.assign(t,{to:{name:"video-player",query:{url:t.url,video_only:!0}}})),t})}),Object(c["d"])().then(t=>{this.types=t})}searchHandler(t){return Object(c["a"])(this.type).search(t)}get type(){return this.$route.query.type}getRouteArg(t){return{name:"video-player",query:{url:t.url,direct:!this.item_type.indirect}}}get item_type(){return this.types.find(t=>t.value===this.type)}};d=i["b"]([Object(l["a"])({components:{SearchWrap:n["a"],ListItem:o["a"]}})],d);var u=d,p=u,h=(a("fb57"),a("2877")),y=a("8f0e"),v=a.n(y),f=Object(h["a"])(p,s,r,!1,null,null,null);"function"===typeof v.a&&v()(f);e["default"]=f.exports},5056:function(t,e,a){},"8f0e":function(t,e){},af40:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",t._b({attrs:{xs12:""}},"v-flex",{sm6:!t.full,md2:!t.full},!1),[a("router-link",{staticClass:"d-block",attrs:{to:t.data.to}},[a("v-img",{attrs:{src:t.data.cover||"","lazy-src":"https://img.imjad.cn/images/2019/02/15/330720-140F40QG761.jpg",width:"100%","aspect-ratio":1.3}},[t._t("img-text")],2)],1)],1),a("v-flex",t._b({attrs:{xs12:""}},"v-flex",{sm6:!t.full,md10:!t.full},!1),[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[t.data.title?a("div",{staticClass:"headline text-ellipse"},[a("router-link",{attrs:{to:t.data.to,title:t.data.title}},[t._v("\n              "+t._s(t.data.title)+"\n            ")])],1):t._e(),t.data.desc?a("div",{staticClass:"grey--text",domProps:{innerHTML:t._s(t.data.desc)}}):t._e(),t._t("default")],2)]),a("v-card-actions",[t._t("actions")],2)],1)],1)],1)},r=[],i=a("9ab4"),l=a("60a3");let n=class extends l["d"]{};i["b"]([Object(l["c"])()],n.prototype,"data",void 0),i["b"]([Object(l["c"])()],n.prototype,"full",void 0),i["b"]([Object(l["c"])({default:200,type:Number})],n.prototype,"imgWidth",void 0),n=i["b"]([Object(l["a"])({})],n);var o=n,c=o,d=a("2877"),u=Object(d["a"])(c,s,r,!1,null,null,null);e["a"]=u.exports},df56:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-xs":"","grid-list-md":""}},[a("v-layout",[a("div",[a("v-autocomplete",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search",loading:t.loading,autofocus:""},on:{"click:append":function(e){return t.onSearch(!0)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t.loading?a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1):t.keyword?t.error_text?a("div",{staticClass:"text-xs-center grey--text"},[t._v("\n    "+t._s(t.error_text)+"\n    "),a("v-btn",{attrs:{small:"",color:"error",flat:""},on:{click:t.search}},[t._v("重试")])],1):a("div",[a("v-layout",[a("v-flex",[t._v("\n        搜索结果 "+t._s(0===t.contents.length?"无":"")+"\n      ")]),a("v-btn",{attrs:{icon:"",title:"刷新"},on:{click:t.search}},[a("v-icon",[t._v("refresh")])],1),a("v-btn",{staticClass:"hidden-xs-only",attrs:{icon:""},on:{click:t.layout}},[a("v-icon",[t._v(t._s(t.full?"list":"grid_on"))])],1)],1),a("v-layout",[a("v-slide-y-transition",{staticStyle:{"flex-wrap":"wrap",display:"flex"},attrs:{group:""}},t._l(t.contents,function(e,s){return a("v-flex",t._b({key:s,attrs:{data:e,xs12:"","d-flex":""}},"v-flex",{sm6:t.full,md4:t.full,lg3:t.full,xl2:t.full},!1),[a("list-item",{attrs:{full:t.full,data:e}},[t.full?t._e():t._t("default",null,{item:e}),e.type?a("span",{staticClass:"blue white--text px-1",attrs:{slot:"img-text"},slot:"img-text"},[t._v("\n              "+t._s(e.type)+"\n            ")]):t._e(),a("template",{slot:"actions"},[a("v-btn",{attrs:{color:"primary",to:e.to}},[a("v-icon",[t._v("play_circle_filled")])],1),t._t("actions",null,{item:e})],2)],2)],1)}),1)],1),a("div",{staticClass:"text-xs-center"},[t.total_page>0?a("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){return t.onSearch(!1)}},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t.total_page<0?a("div",[a("v-btn",{attrs:{disabled:t.page<=1},on:{click:function(e){return t.toPage(t.page-1)}}},[t._v("上一页")]),a("v-btn",{on:{click:function(e){return t.toPage(t.page+1)}}},[t._v("下一页")])],1):t._e()],1)],1):t._t("other")],2)},r=[],i=a("9ab4"),l=a("60a3"),n=a("af40");let o=class extends l["d"]{constructor(){super(...arguments),this.contents=[],this.keyword="",this.type="",this.page=1,this.limit=20,this.full=!1,this.loading=!1,this.total_page=0,this.error_text=""}beforeRouteUpdate(){this.syncParams(),this.keyword&&this.search()}syncParams(){let t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.page=Number(t.page)||1,this.type=t.type||this.defaultType}onTypeChange(){this.keyword&&this.onSearch(!0)}onSearch(t){t&&(this.page=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,page:String(this.page),limit:String(this.limit),type:this.type}})}async search(){this.loading=!0,this.contents=[];try{var t=await this.searchHandler({kw:this.keyword,page:this.page,type:this.type}),e=t.pages,a=t.items;this.total_page=e,this.contents=a.map(t=>{return t.collapsed=!0,t.to=this.getRouteArg(t),t}),this.error_text=""}catch(s){this.error_text=s.message}this.loading=!1}toPage(t){this.page=t,this.onSearch(!1)}layout(){this.full=!this.full,this.$emit("layout",this.full)}};i["b"]([Object(l["c"])()],o.prototype,"types",void 0),i["b"]([Object(l["c"])(Function)],o.prototype,"searchHandler",void 0),i["b"]([Object(l["c"])()],o.prototype,"defaultType",void 0),i["b"]([Object(l["c"])()],o.prototype,"getRouteArg",void 0),i["b"]([Object(l["e"])("$route",{immediate:!0})],o.prototype,"beforeRouteUpdate",null),o=i["b"]([Object(l["a"])({components:{ListItem:n["a"]}})],o);var c=o,d=c,u=a("2877"),p=Object(u["a"])(d,s,r,!1,null,null,null);e["a"]=p.exports},fb57:function(t,e,a){"use strict";var s=a("5056"),r=a.n(s);r.a}}]);