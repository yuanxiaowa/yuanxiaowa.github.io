(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-index"],{"007b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",[a("div",[a("v-select",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search"},on:{"click:append":function(e){t.onSearch(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("div",[t._v("\n    搜索结果\n    "),a("v-layout",{attrs:{wrap:""}},t._l(t.contents,function(e,s){return a("v-flex",{key:s,staticClass:"my-1",attrs:{xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-layout",[a("div",[a("v-img",{attrs:{src:e.cover,width:"200","aspect-ratio":1.3}})],1),a("v-flex",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),a("div",{staticClass:"grey--text"},[t._v("描述："+t._s(e.desc))])])]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},on:{click:function(a){t.toPlay(e)}}},[a("v-icon",[t._v("play_circle_filled")])],1)],1)],1)],1)],1)],1)}),1),a("div",{staticClass:"text-xs-center"},[t.total_page>0?a("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){t.onSearch(!1)}},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}}):t._e()],1)],1)],1)},i=[],r=a("9ab4"),o=a("60a3"),n=a("9530"),l=a.n(n);let c=class extends o["d"]{constructor(){super(...arguments),this.types=[],this.contents=[],this.keyword="",this.type="qq",this.offset=1,this.limit=20,this.total_page=0}beforeRouteUpdate(){this.syncParams(),this.search()}syncParams(){let t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.offset=Number(t.offset)||1,this.type=t.type||"qq"}onTypeChange(){this.keyword&&this.onSearch(!0)}created(){this.types=[{value:"qq",text:"腾讯视频"},{value:"youku",text:"优酷视频"}],this.$route.query.keyword&&(this.syncParams(),this.search())}onSearch(t){t&&(this.offset=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,offset:String(this.offset),limit:String(this.limit),type:this.type}})}async search(){var t=await this.$apollo.query({query:l.a`query ($kw: String!,$type:String!, $page:Int) {
        videoSearch(kw:$kw, type:$type,page:$page) {
          page
          pages
          items
        }
      }`,variables:{kw:this.keyword,page:this.offset-1,type:this.type}}),e=t.data.videoSearch,a=(e.page,e.pages),s=e.items;this.total_page=a,this.contents=s}toPlay(t){this.$router.push({name:"video-player",query:{url:t.url}})}};r["a"]([Object(o["e"])("$route")],c.prototype,"beforeRouteUpdate",null),c=r["a"]([Object(o["a"])({})],c);var p=c,u=p,h=(a("fb57"),a("2877")),y=Object(h["a"])(u,s,i,!1,null,null,null);y.options.__file="index.vue";e["default"]=y.exports},"2b80":function(t,e,a){},fb57:function(t,e,a){"use strict";var s=a("2b80"),i=a.n(s);i.a}}]);