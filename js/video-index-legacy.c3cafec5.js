(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-index"],{"007b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("search-wrap",{attrs:{"default-type":"qq",types:t.types,"search-handler":t.searchHandler},on:{play:t.toPlay},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[n.desc?a("div",{staticClass:"grey--text"},[t._v(t._s(n.desc))]):t._e(),n.series?a("div",{class:n.collapsed?"video-list-collapsed":""},t._l(n.series,function(e,n){return a("v-btn",{key:n,attrs:{small:"",to:{name:"video-player",query:{url:e.url,type:t.type}}}},[t._v(t._s(e.name))])}),1):t._e(),n.series?a("div",[a("v-btn",{attrs:{icon:""},on:{click:function(t){n.collapsed=!n.collapsed}}},[t._v(t._s(n.collapsed?"展开":"收缩"))])],1):t._e()]}}])})},r=[],i=a("c665"),s=a("dc0a"),c=a("aa9a"),o=a("d328"),u=a("11d9"),l=a("9ab4"),p=a("60a3"),f=a("df56"),d=a("a34a"),h=a.n(d),y=a("6eec"),v=a("3040"),b=a("bc3a"),m=a.n(b),k=a("9530"),w=a.n(k),g=a("53b8");function _(){var t=Object(y["a"])(["query ($url: String!,$type:String!) {\n        video(url:$url, type:$type) {\n          page\n          pages\n          items\n        }\n      }"]);return _=function(){return t},t}function x(){var t=Object(y["a"])(["query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }"]);return x=function(){return t},t}var j={search:function(){var t=Object(v["a"])(h.a.mark(function t(e){var a,n;return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"].query({query:w()(x()),variables:e});case 2:return a=t.sent,n=a.data.videoSearch,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),info:function(){var t=Object(v["a"])(h.a.mark(function t(e){var a,n;return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"].query({query:w()(_()),variables:e});case 2:return a=t.sent,n=a.data.video,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},O={search:function(){var t=Object(v["a"])(h.a.mark(function t(e){var a,n,r,i,s;return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("https://api.imjad.cn/bilibili/v2/",{params:{get:"search",keyword:e.kw}});case 2:if(a=t.sent,n=a.data,r=n.code,i=n.data,s=n.message,0===r){t.next=9;break}throw new Error(s);case 9:return t.abrupt("return",{page:i.page,pages:-1,items:i.items.archive.map(function(t){return t.url="https://www.bilibili.com/video/".concat(t.goto).concat(t.param),t})});case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),info:function(){var t=Object(v["a"])(h.a.mark(function t(e){return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("暂无数据");case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()};function $(t){return"bilibili"===t?O:j}var S=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.types=[],t}return Object(c["a"])(e,[{key:"created",value:function(){this.types=[{value:"qq",text:"腾讯视频"},{value:"youku",text:"优酷视频"},{value:"bilibili",text:"哔哩哔哩"}],this.$axios.get("https://www.easy-mock.com/mock/594d30e98ac26d795f4516dd/bilibili/banner/bilibili/banner")}},{key:"searchHandler",value:function(t){return $(this.type).search(t)}},{key:"toPlay",value:function(t){this.$router.push({name:"video-player",query:{url:t.url,type:this.type}})}},{key:"type",get:function(){return this.$route.query.type}}]),Object(s["a"])(e,t),e}(p["d"]);S=l["a"]([Object(p["a"])({components:{SearchWrap:f["a"]}})],S);var q=S,C=q,P=(a("fb57"),a("2877")),E=Object(P["a"])(C,n,r,!1,null,null,null);E.options.__file="index.vue";e["default"]=E.exports},"2b80":function(t,e,a){},"7d65":function(t,e,a){},cf5c:function(t,e,a){"use strict";var n=a("7d65"),r=a.n(n);r.a},df56:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",[a("div",[a("v-select",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search",loading:t.loading},on:{"click:append":function(e){t.onSearch(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t.loading?a("div",{staticClass:"text-xs-center"},[a("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1):a("div",[t._v("\n    搜索结果\n    "),a("v-layout",{attrs:{wrap:""}},t._l(t.contents,function(e,n){return a("v-flex",{key:n,staticClass:"my-1",attrs:{xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-layout",[a("div",[a("v-img",{attrs:{src:e.cover,"lazy-src":"https://img.imjad.cn/images/2019/02/15/330720-140F40QG761.jpg",width:"200","aspect-ratio":1.3}})],1),a("v-flex",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),t._t("default",null,{item:e})],2)]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},on:{click:function(a){t.play(e)}}},[a("v-icon",[t._v("play_circle_filled")])],1),t._t("actions",null,{item:e})],2)],1)],1)],1)],1)}),1),a("div",{staticClass:"text-xs-center"},[t.total_page>0?a("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){t.onSearch(!1)}},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}}):t.total_page<0?a("div",[a("v-btn",{attrs:{disabled:t.offset<=1},on:{click:function(e){t.toPage(t.offset-1)}}},[t._v("上一页")]),a("v-btn",{on:{click:function(e){t.toPage(t.offset+1)}}},[t._v("下一页")])],1):t._e()],1)],1)],1)},r=[],i=a("a34a"),s=a.n(i),c=a("3040"),o=a("c665"),u=a("dc0a"),l=a("aa9a"),p=a("d328"),f=a("11d9"),d=a("9ab4"),h=a("60a3"),y=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(p["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.contents=[],t.keyword="",t.type="",t.offset=1,t.limit=20,t.loading=!1,t.total_page=0,t}return Object(l["a"])(e,[{key:"beforeRouteUpdate",value:function(){this.syncParams(),this.keyword&&this.search()}},{key:"syncParams",value:function(){var t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.offset=Number(t.offset)||1,this.type=t.type||this.defaultType}},{key:"onTypeChange",value:function(){this.keyword&&this.onSearch(!0)}},{key:"onSearch",value:function(t){t&&(this.offset=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,offset:String(this.offset),limit:String(this.limit),type:this.type}})}},{key:"search",value:function(){var t=Object(c["a"])(s.a.mark(function t(){var e,a,n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.searchHandler({kw:this.keyword,page:this.offset-1,type:this.type});case 4:e=t.sent,a=e.pages,n=e.items,this.total_page=a,this.contents=n.map(function(t){return t.collapsed=!0,t}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),this.$toast(t.t0.message);case 14:this.loading=!1;case 15:case"end":return t.stop()}},t,this,[[1,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"play",value:function(t){}},{key:"toPage",value:function(t){this.offset=t,this.onSearch(!1)}}]),Object(u["a"])(e,t),e}(h["d"]);d["a"]([Object(h["c"])()],y.prototype,"types",void 0),d["a"]([Object(h["c"])(Function)],y.prototype,"searchHandler",void 0),d["a"]([Object(h["c"])()],y.prototype,"defaultType",void 0),d["a"]([Object(h["e"])("$route",{immediate:!0})],y.prototype,"beforeRouteUpdate",null),d["a"]([Object(h["b"])()],y.prototype,"play",null),y=d["a"]([Object(h["a"])({})],y);var v=y,b=v,m=(a("cf5c"),a("2877")),k=Object(m["a"])(b,n,r,!1,null,null,null);k.options.__file="SearchWrap.vue";e["a"]=k.exports},fb57:function(t,e,a){"use strict";var n=a("2b80"),r=a.n(n);r.a}}]);