(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-player"],{"55f4":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-wrap"},[e.t_direct?!e.loading&&e.info&&e.info.url?[e.error_text?n("div",{staticClass:"text-xs-center"},[e._v("\n      出错了\n      "),n("v-btn",{attrs:{color:"red--text"},on:{click:e.reload}},[e._v("重试")])],1):e.need_dplayer?n("video-player",{attrs:{src:e.info.url},on:{error:e.onError}}):n("video",{staticStyle:{width:"100%"},attrs:{crossorigin:"anonymous",src:e.info.url,controls:""}})]:e._e():n("iframe",{attrs:{width:"100%",height:"100%",src:e.url,frameborder:"0",allowfullscreen:""}}),n("div",{staticClass:"ma-2"},[e.direct?e._e():n("v-select",{attrs:{items:e.items,dense:""},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}}),e.loading?n("div",[n("v-progress-circular",{attrs:{color:"primary",indeterminate:""}}),e._v("\n      正在获取数据...\n    ")],1):e.info?n("div",[n("v-layout",[n("h3",[e._v(e._s(e.info.title))]),n("v-spacer"),n("a",{attrs:{href:e.play_url,target:"_blank"}},[e._v("到源网站播放")])],1),n("div",{staticClass:"gray--text",domProps:{innerHTML:e._s(e.info.desc)}}),e.info.series?n("div",{staticClass:"mt-2"},[n("b",[e._v(e._s(e.info.series.title)+"剧集列表：")]),n("div",e._l(e.info.series.items,function(t,i){return n("v-btn",{key:i,attrs:{color:t.url===e.play_url?"primary--text":void 0,to:{query:{url:t.url,direct:String(e.direct)}}}},[e._v(e._s(t.title))])}),1)]):e._e()],1):e._e()],1)],2)},r=[],a=n("4795"),o=n.n(a),u=n("9ab4"),s=n("60a3"),l=n("cdf7"),d=n("5912"),c=n("4bb5");function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(i,r)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){p(a,i,r,o,u,"next",e)}function u(e){p(a,i,r,o,u,"throw",e)}o(void 0)})}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e}function h(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}var N=Object(c["e"])("music"),_=function(e){function t(){var e;return f(this,t),e=h(this,g(t).apply(this,arguments)),e.items=[],e.source="http://jqaaa.com/jx.php",e.info=null,e.loading=!1,e.error_text="",e.t_direct=!0,e.play_url="",e}return w(t,e),y(t,[{key:"created",value:function(){var e=m(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$route.query.type){e.next=6;break}return e.next=3,this.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"videoResolvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"text"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:138,source:{body:"\n          query {\n            videoResolvers {\n              id\n              text\n              value\n            }\n          }\n        ",name:"GraphQL request",locationOffset:{line:1,column:1}}}}});case 3:t=e.sent,n=t.data.videoResolvers,this.items=n;case 6:this.setPlaying(!1);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"beforeRouteUpdate",value:function(){var e=this;this.t_direct=this.direct,this.$route.query.video_only?this.info={url:this.$route.query.url}:(this.loading=!0,this.play_url=this.$route.query.url,Object(l["c"])(this.play_url).info({url:this.play_url}).then(function(t){e.info=t,t.nodirect&&(e.t_direct=!1,e.play_url=t.url),e.error_text=""}).finally(function(){e.loading=!1}))}},{key:"onError",value:function(e){}},{key:"reload",value:function(){location.reload()}},{key:"direct",get:function(){return Boolean(this.$route.query.direct)}},{key:"url",get:function(){return"".concat(this.source,"?url=").concat(encodeURIComponent(this.play_url))}},{key:"need_dplayer",get:function(){var e=this;return![].some(function(t){return e.info.url.startsWith(t)})}}]),t}(s["d"]);u["b"]([N.Mutation],_.prototype,"setPlaying",void 0),u["b"]([Object(s["e"])("$route",{immediate:!0})],_.prototype,"beforeRouteUpdate",null),_=u["b"]([Object(s["a"])({components:{VideoPlayer:d["a"]}})],_);var x=_,q=x,O=(n("a97b"),n("2877")),F=n("724d"),V=n.n(F),D=Object(O["a"])(q,i,r,!1,null,null,null);"function"===typeof V.a&&V()(D);t["default"]=D.exports},"724d":function(e,t){},9035:function(e,t,n){},a97b:function(e,t,n){"use strict";var i=n("9035"),r=n.n(i);r.a},cdf7:function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return k});var i=n("4795"),r=n.n(i),a=n("bc3a"),o=n.n(a),u=n("53b8");function s(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(i,r)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){s(a,i,r,o,u,"next",e)}function u(e){s(a,i,r,o,u,"throw",e)}o(void 0)})}}var d={search:function(){var e=l(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"kw"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"videoSearch"},arguments:[{kind:"Argument",name:{kind:"Name",value:"kw"},value:{kind:"Variable",name:{kind:"Name",value:"kw"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"pages"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:165,source:{body:"query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:t});case 2:return n=e.sent,i=n.data.videoSearch,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),info:function(){var e=l(r.a.mark(function e(t){var n,i;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"cover"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"desc"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"rate"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"series"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"nodirect"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:194,source:{body:"query ($url: String!) {\n        video(url:$url) {\n          title\n          type\n          cover\n          url\n          desc\n          rate\n          series\n          nodirect\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:t});case 2:return n=e.sent,i=n.data.video,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},c={search:function(){var e=l(r.a.mark(function e(t){var n,i,a,u,s;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("https://api.imjad.cn/bilibili/v2/",{params:{get:"search",keyword:t.kw,page:t.page}});case 2:if(n=e.sent,i=n.data,a=i.code,u=i.data,s=i.message,0===a){e.next=9;break}throw new Error(s);case 9:return e.abrupt("return",{page:u.page,pages:-1,items:u.items.archive.map(function(e){return e.url="https://www.bilibili.com/video/".concat(e.goto).concat(e.param),e})});case 10:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),info:function(){var e=l(r.a.mark(function e(t){return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("暂无数据");case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()};function v(e){return"bilibili"===e?c:d}function p(e){return e.startsWith("https://www.bilibili.com")?c:d}function m(e){return f.apply(this,arguments)}function f(){return f=l(r.a.mark(function e(t){var n,i,a,u;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("https://api.apiopen.top/todayVideo");case 2:return n=e.sent,i=n.data,u=[],i.result.forEach(function(e){var t=e.data;"textCard"!==e.type?(t=t.content.data,t.playUrl&&a.items.push({title:t.title,cover:t.cover.detail,desc:t.description,url:t.playUrl})):a&&a.title===t.text||(a={title:t.text,items:[]},u.push(a))}),e.abrupt("return",u.filter(function(e){return e.items.length>0}));case 7:case"end":return e.stop()}},e)})),f.apply(this,arguments)}function k(){return y.apply(this,arguments)}function y(){return y=l(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"videoSites"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"text"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"value"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"indirect"},arguments:[],directives:[],selectionSet:void 0}]}}]}}],loc:{start:0,end:124,source:{body:"\n        query {\n          videoSites {\n            text\n            value\n            indirect\n          }\n        }\n      ",name:"GraphQL request",locationOffset:{line:1,column:1}}}}});case 2:return t=e.sent,n=t.data.videoSites,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),y.apply(this,arguments)}}}]);