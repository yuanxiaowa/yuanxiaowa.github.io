(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["svn-id"],{"7d34":function(e,t){},"9db4":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-layout",{staticClass:"pa-3"},[n("v-flex",[e._v("\n      "+e._s(e.path)+"\n    ")]),n("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){return e.showLog(e.path,!1)}}},[e._v("查看日志")])],1),n("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab",{attrs:{href:"#tab-1"}},[e._v("本地")]),n("v-tab",{attrs:{href:"#tab-2"}},[e._v("合并")])],1),n("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab-item",{attrs:{value:"tab-1"}},[n("svn-local",{ref:"sl",attrs:{path:e.path},on:{"show-log":e.showLog,message:e.onMessage}})],1),n("v-tab-item",{attrs:{value:"tab-2"}},[n("keep-alive",["tab-2"===e.tab?n("svn-merge",{attrs:{path:e.path,url:e.url},on:{message:e.onMessage,merged:e.onMerged}}):e._e()],1)],1)],1),n("v-expansion-panel",{staticClass:"mt-3"},[n("v-expansion-panel-content",[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("日志")]),n("v-card",{attrs:{dark:""}},[e.logs.length>0?n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{flat:"",icon:"",color:"red"},on:{click:e.clearLogs}},[n("v-icon",[e._v("cancel")])],1)],1):e._e(),0===e.logs.length?n("v-card-title",[e._v("暂无记录")]):e._e(),e._l(e.logs,function(t,i){return n("v-card-text",{key:i},[n("v-layout",[n("v-flex",e._l(t.items,function(t,i){return n("div",{key:i},[e._v("\n                "+e._s(t)+"\n              ")])}),0),n("div",[e._v("\n              "+e._s(e._f("date")(t.date))+"\n            ")])],1),n("v-divider")],1)})],2)],1)],1),n("my-dialog",{attrs:{"max-width":"800px",title:"修改记录"},model:{value:e.show_log,callback:function(t){e.show_log=t},expression:"show_log"}},[n("div",[e._v("文件路径："+e._s(e.log_path))]),n("svn-log",{attrs:{path:e.log_path,"remote-base":e.log_remote_base}})],1)],1)},a=[],r=n("4795"),o=n.n(r),l=n("9ab4"),s=n("60a3"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-actions",[n("v-spacer"),n("v-tooltip",{attrs:{top:""}},[n("v-btn",{attrs:{slot:"activator",icon:""},on:{click:e.update},slot:"activator"},[n("v-icon",[e._v("arrow_downward")])],1),n("span",[e._v("更新")])],1),n("v-tooltip",{attrs:{top:""}},[n("v-btn",{attrs:{slot:"activator",icon:""},on:{click:e.refresh},slot:"activator"},[n("v-icon",[e._v("refresh")])],1),n("span",[e._v("刷新")])],1)],1),n("v-card-text",[n("v-data-table",{attrs:{headers:e.headers,items:e.items,"select-all":"primary",loading:e.loading,"item-key":"path",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":"",color:"primary"},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),n("td",["added"!==t.item.type&&"unversioned"!==t.item.type?n("a",{attrs:{color:"primary"},on:{click:function(n){return e.$emit("show-log",t.item.path)}}},[e._v("\n              "+e._s(t.item.path)+"\n            ")]):n("div",[e._v(e._s(t.item.path))])]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.type))]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.revision))]),n("td",[t.item.commit?n("div",[e._v("\n              提交者："+e._s(t.item.commit.author)+" "),n("br"),e._v(" 时间："+e._s(e._f("date")(t.item.commit.date))+"\n              "),n("br"),e._v(" 版本："+e._s(t.item.commit.revision)+"\n            ")]):e._e()]),n("td",{staticClass:"text-xs-right"},[n("v-icon",{attrs:{disabled:!("unversioned"!==t.item.type&&!t.item.hasConflict),color:"green"},on:{click:function(n){return e.commit([t.item.path])}}},[e._v("arrow_upward")]),n("v-icon",{attrs:{disabled:"unversioned"!==t.item.type,color:"green"},on:{click:function(n){return e.add([t.item.path])}}},[e._v("add")]),n("v-icon",{attrs:{disabled:!t.item.hasConflict,color:"warn"},on:{click:function(n){return e.resolve([t.item.path])}}},[e._v("check")]),n("v-icon",{attrs:{disabled:"added"===t.item.type||"unversioned"===t.item.type,color:"red"},on:{click:function(n){return e.del([t.item.path])}}},[e._v("delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("v-layout",{attrs:{slot:"actions-prepend","align-center":""},slot:"actions-prepend"},[n("v-text-field",{attrs:{placeholder:"注释"},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e.has_new?n("v-tooltip",{attrs:{top:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",flat:"",small:"",color:"green"},on:{click:e.addSelected},slot:"activator"},[n("v-icon",[e._v("add")])],1),n("span",[e._v("添加选中")])],1):e._e(),n("v-tooltip",{attrs:{top:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",flat:"",small:"",color:"green"},on:{click:e.commitSelected},slot:"activator"},[n("v-icon",[e._v("arrow_upward")])],1),n("span",[e._v("提交选中")])],1)],1)],1)],1)],1)],1)},u=[];function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function v(e,t,n,i,a,r,o){try{var l=e[r](o),s=l.value}catch(d){return void n(d)}l.done?t(s):Promise.resolve(s).then(i,a)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function o(e){v(r,i,a,o,l,"next",e)}function l(e){v(r,i,a,o,l,"throw",e)}o(void 0)})}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}var S=function(e){function t(){var e;return p(this,t),e=h(this,b(t).apply(this,arguments)),e.selected=[],e.pagination={rowsPerPage:10},e.headers=[{text:"路径",value:"path",align:"left"},{text:"状态",value:"type",align:"center"},{text:"版本",value:"revision",align:"center"},{text:"上次提交",value:"path",align:"left"},{text:"操作",value:"path",align:"right"}],e.items=[],e.loading=!1,e.msg="",e}return g(t,e),k(t,[{key:"created",value:function(){this.fetchData()}},{key:"commitSelected",value:function(){if(!this.selected.length)return this.$toast("请选择提交项");if(!this.msg)return this.$toast("请输入注释");var e=this.selected.map(function(e){return e.path});this.commit(e)}},{key:"addSelected",value:function(){}},{key:"handle",value:function(){var e=m(o.a.mark(function e(t,n){var i,a;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.mutate({mutation:n,variables:{paths:t,cwd:this.path,msg:this.msg}});case 2:i=e.sent,a=i.data,this.$emit("message",a[Object.keys(a)[0]]),this.refresh();case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){return this.handle([],{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paths"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cwd"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnUpdate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"Variable",name:{kind:"Name",value:"paths"}}},{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"cwd"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:90,source:{body:"mutation($paths:[String]!, $cwd:String){\n        svnUpdate(paths:$paths, cwd:$cwd)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}})}},{key:"add",value:function(e){return this.handle(e,{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paths"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cwd"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnAdd"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"Variable",name:{kind:"Name",value:"paths"}}},{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"cwd"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:87,source:{body:"mutation($paths:[String]!, $cwd:String){\n        svnAdd(paths:$paths, cwd:$cwd)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}})}},{key:"commit",value:function(e){return this.handle(e,{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paths"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cwd"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"msg"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnCommit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"Variable",name:{kind:"Name",value:"paths"}}},{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"cwd"}}},{kind:"Argument",name:{kind:"Name",value:"msg"},value:{kind:"Variable",name:{kind:"Name",value:"msg"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:114,source:{body:"mutation($paths:[String]!, $cwd:String, $msg:String!){\n        svnCommit(paths:$paths, cwd:$cwd, msg:$msg)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}})}},{key:"revert",value:function(e){return this.handle(e,{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paths"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cwd"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnRevert"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"Variable",name:{kind:"Name",value:"paths"}}},{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"cwd"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:90,source:{body:"mutation($paths:[String]!, $cwd:String){\n        svnRevert(paths:$paths, cwd:$cwd)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}})}},{key:"resolve",value:function(e){return this.handle(e,{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paths"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cwd"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnResolve"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"Variable",name:{kind:"Name",value:"paths"}}},{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"cwd"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:91,source:{body:"mutation($paths:[String]!, $cwd:String){\n        svnResolve(paths:$paths, cwd:$cwd)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}})}},{key:"del",value:function(){var e=m(o.a.mark(function e(t){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("确定要删除吗？");case 2:return e.abrupt("return",this.handle(t,{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paths"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cwd"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnDel"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"Variable",name:{kind:"Name",value:"paths"}}},{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"cwd"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:87,source:{body:"mutation($paths:[String]!, $cwd:String){\n        svnDel(paths:$paths, cwd:$cwd)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}}));case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchData",value:function(){var e=m(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cwd"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"path"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"revision"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"hasConflict"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"date"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"revision"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}],loc:{start:0,end:231,source:{body:"query($path:String!) {\n        svnStatus(cwd: $path) {\n          path\n          type\n          revision\n          hasConflict\n          commit {\n            author\n            date\n            revision\n          }\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{path:this.path}});case 4:t=e.sent,n=t.data.svnStatus,this.items=this.selected=n,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:this.loading=!1;case 12:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"refresh",value:function(){return this.fetchData()}},{key:"has_new",get:function(){return!!this.selected.find(function(e){return"unversioned"===e.type})}}]),t}(s["d"]);l["b"]([Object(s["c"])(String)],S.prototype,"path",void 0),S=l["b"]([s["a"]],S);var w=S,_=w,V=n("2877"),O=Object(V["a"])(_,d,u,!1,null,null,null),x=O.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[n("v-radio-group",{attrs:{row:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.radios,function(e,t){return n("v-radio",{key:e,attrs:{label:e,value:t}})}),1),n("v-autocomplete",{attrs:{items:e.structures[e.type],"item-text":"name","item-value":"fullPath",placeholder:"请选择分支"},model:{value:e.selected_item,callback:function(t){e.selected_item=t},expression:"selected_item"}}),n("v-layout",[n("v-spacer"),n("v-btn",{attrs:{small:"",icon:""},on:{click:e.refreshLog}},[n("v-icon",[e._v("refresh")])],1)],1),n("svn-log",{ref:"sl",attrs:{path:e.selected_item,"merge-info":e.mergeInfo},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),n("div",{staticStyle:{"margin-top":"-4em"}},[n("v-btn",{attrs:{color:"primary",disabled:0===e.selected.length,loading:e.merging},on:{click:e.merge}},[e._v("合并")])],1)],1)],1)},$=[],T=n("2638"),j=n.n(T),F=n("3f7a");function P(e){return P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function q(e,t,n,i,a,r,o){try{var l=e[r](o),s=l.value}catch(d){return void n(d)}l.done?t(s):Promise.resolve(s).then(i,a)}function L(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function o(e){q(r,i,a,o,l,"next",e)}function l(e){q(r,i,a,o,l,"throw",e)}o(void 0)})}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function M(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function Q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}var J=function(e){function t(){var e;return A(this,t),e=M(this,G(t).apply(this,arguments)),e.show=!1,e.files=[],e.items=[],e.pagination={page:1,rowsPerPage:10},e.total=0,e.loading=!1,e.headers=[{text:"版本",value:"revision"},{text:"备注",value:"msg"},{text:"提交者",value:"author"},{text:"提交时间",value:"date"},{text:"查看文件",value:"revision"}],e.query={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnLog"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"total"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"revision"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"date"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"msg"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"paths"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"kind"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"path"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}]}}],loc:{start:0,end:259,source:{body:"query($path:String!, $page: Int){\n    svnLog(path: $path, page: $page) {\n      page,\n      total,\n      items {\n        revision\n        author\n        date\n        msg\n        paths {\n          kind\n          action\n          path\n        }\n      }\n    }\n  }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},e}return Q(t,e),C(t,[{key:"showFiles",value:function(e){this.show=!0,this.files=e.map(function(e){var t=e.path,n=e.kind,i=e.action;return{kind:n,action:i,path:t}})}},{key:"onPathChange",value:function(e){this.items=[],this.total=0,1===this.pagination.page?this.fetchData(1):this.pagination.page=1}},{key:"input",value:function(e){}},{key:"refresh",value:function(){return this.fetchData(this.pagination.page)}},{key:"fetchData",value:function(){var e=L(o.a.mark(function e(t){var n,i,a,r;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.path){e.next=2;break}return e.abrupt("return");case 2:return this.loading=!0,e.next=5,this.$apollo.query({query:this.query,variables:{path:this.path,page:t}});case 5:n=e.sent,i=n.data.svnLog,i.page,a=i.items,r=i.total,this.items=a.map(function(e){return e.msg=e.msg.split(/\r?\n/),e}),this.input([]),this.total=r,this.loading=!1;case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onPagination",value:function(e){this.pagination=e,this.fetchData(e.page)}},{key:"render",value:function(){var e=this,t=arguments[0],n={props:{"select-all":!!this.mergeInfo&&"primary"},on:{"update:pagination":this.onPagination},scopedSlots:{items:function(n){var i=n.item,a=[t("td",[" ",i.revision," "]),t("td",[i.msg.map(function(e,n){return t("div",{key:n},[" ",e," "])})]),t("td",[i.author," "]),t("td",[s["d"].filter("date")(i.date)," "]),t("td",[t("v-icon",{on:{click:function(){return e.showFiles(i.paths)}}},["filter_tilt_shif t "])])];return e.mergeInfo&&(e.mergeInfo.includes(i.revision)&&(a[0]=t("td",{attrs:{title:"已合并"}},[t("v-badge",{attrs:{color:"purple",left:!0}},[t("v-icon",{slot:"badge",attrs:{dark:!0,small:!0}},["alarm_off"]),i.revision])])),a.unshift(t("td",[t("v-checkbox",{attrs:{"input-value":n.selected,color:"primary"},on:{change:function(e){return n.selected=e}}})]))),a}}};return this.mergeInfo&&(n.props.value=this.value,n.o.input=this.input),t("div",[t("v-data-table",j()([{},n,{attrs:{items:this.items,headers:this.headers,pagination:this.pagination,loading:this.loading,"total-items":this.total,"item-key":"revision"}}])),t("my-dialog",{on:{input:function(t){return e.show=t}},attrs:{value:this.show,"max-width":"800px"}},[t("v-list",[this.files.map(function(e){return t("v-list-tile",{key:e.path},[t("v-list-tile-action",["dir"===e.kind?t("v-icon",{attrs:{color:"amber"}},["folder"]):t("v-icon",{attrs:{color:"indigo"}},["mdi-file"])]),t("v-list-tile-content",[e.path])])})])])])}}]),t}(s["d"]);l["b"]([Object(s["c"])(String)],J.prototype,"path",void 0),l["b"]([Object(s["c"])(String)],J.prototype,"remoteBase",void 0),l["b"]([Object(s["c"])()],J.prototype,"mergeInfo",void 0),l["b"]([Object(s["c"])()],J.prototype,"value",void 0),l["b"]([Object(s["e"])("path")],J.prototype,"onPathChange",null),l["b"]([Object(s["b"])()],J.prototype,"input",null),J=l["b"]([Object(s["a"])({components:{MyDialog:F["a"]}})],J);var U,B,z=J,H=z,K=Object(V["a"])(H,U,B,!1,null,null,null),W=K.exports;function X(e){return X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t,n,i,a,r,o){try{var l=e[r](o),s=l.value}catch(d){return void n(d)}l.done?t(s):Promise.resolve(s).then(i,a)}function Z(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function o(e){Y(r,i,a,o,l,"next",e)}function l(e){Y(r,i,a,o,l,"throw",e)}o(void 0)})}}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}function ie(e,t){return!t||"object"!==X(t)&&"function"!==typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}function le(e,t){return le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},le(e,t)}var se=function(e){function t(){var e;return ee(this,t),e=ie(this,re(t).apply(this,arguments)),e.fields=[],e.radios=["branches","tags","trunk"],e.type=0,e.structures=[],e.selected_item="",e.mergeInfo=[],e.selected=[],e.merging=!1,e}return oe(t,e),ne(t,[{key:"created",value:function(){this.getStructure()}},{key:"refreshLog",value:function(){var e=this.$refs.sl;e.refresh()}},{key:"merge",value:function(){var e=Z(o.a.mark(function e(){var t,n,i;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.selected.map(function(e){return e.revision}).sort(function(e,t){return e-t}),this.$emit("message","开始合并"),this.merging=!0,e.prev=3,e.next=6,this.$apollo.mutate({mutation:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"revisions"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnMerge"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}},{kind:"Argument",name:{kind:"Name",value:"revisions"},value:{kind:"Variable",name:{kind:"Name",value:"revisions"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:132,source:{body:"mutation($path: String!, $url: String!, $revisions: [Int]!){\n        svnMerge(path: $path, url: $url, revisions: $revisions)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{path:this.path,url:this.selected_item,revisions:t}});case 6:n=e.sent,i=n.data.svnMerge,this.getMergeInfo(this.selected_item),this.$emit("message",i),this.$emit("merged"),this.$toast("合并成功"),this.selected=[],e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](3);case 17:this.merging=!1;case 18:case"end":return e.stop()}},e,this,[[3,15]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getMergeInfo",value:function(){var e=Z(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.mergeInfo=[],e.next=3,this.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnMergeInfo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[],selectionSet:void 0}]}}],loc:{start:0,end:90,source:{body:"query($path: String!,$url: String!) {\n        svnMergeInfo(path: $path, url: $url)\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{path:this.path,url:t}});case 3:n=e.sent,i=n.data.svnMergeInfo,this.mergeInfo=i;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStructure",value:function(){var e=Z(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnStructure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"fullPath"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"date"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"revision"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}],loc:{start:0,end:214,source:{body:"query($path: String!) {\n        svnStructure(path: $path) {\n          name\n          fullPath\n          type\n          commit {\n            author\n            date\n            revision\n          }\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{path:this.url}});case 2:t=e.sent,n=t.data.svnStructure,this.structures=n;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(s["d"]);l["b"]([Object(s["c"])(String)],se.prototype,"path",void 0),l["b"]([Object(s["c"])(String)],se.prototype,"url",void 0),l["b"]([Object(s["c"])(String)],se.prototype,"root",void 0),l["b"]([Object(s["e"])("selected_item")],se.prototype,"getMergeInfo",null),l["b"]([Object(s["e"])("url")],se.prototype,"getStructure",null),se=l["b"]([Object(s["a"])({components:{SvnLog:W}})],se);var de=se,ue=de,ce=Object(V["a"])(ue,D,$,!1,null,null,null),ve=ce.exports;function me(e){return me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function pe(e,t,n,i,a,r,o){try{var l=e[r](o),s=l.value}catch(d){return void n(d)}l.done?t(s):Promise.resolve(s).then(i,a)}function fe(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function o(e){pe(r,i,a,o,l,"next",e)}function l(e){pe(r,i,a,o,l,"throw",e)}o(void 0)})}}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}function be(e,t){return!t||"object"!==me(t)&&"function"!==typeof t?ge(e):t}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Se(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}function we(e,t){return we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},we(e,t)}var _e=function(e){function t(){var e;return ke(this,t),e=be(this,Ne(t).apply(this,arguments)),e.tab="tab-1",e.logs=[],e.log_path="",e.log_remote_base="",e.show_log=!1,e.remote_base="",e.url="",e.root="",e}return Se(t,e),ye(t,[{key:"created",value:function(){this.getInfo()}},{key:"onMerged",value:function(){var e=this.$refs.sl;e.refresh()}},{key:"showLog",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.show_log=!0,"string"===typeof e?(t=e,n=this.remote_base,i&&(t=this.path+"/"+t)):(t=e.path,n=e.remote_base),this.log_path=t,this.log_remote_base=n}},{key:"onMessage",value:function(e){this.logs.unshift({date:new Date,items:e.split(/\r?\n/)})}},{key:"getInfo",value:function(){var e=fe(o.a.mark(function e(){var t,n,i,a;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.query({query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:void 0,variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:void 0,directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"svnInfo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:void 0},{kind:"Field",alias:void 0,name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:void 0,name:{kind:"Name",value:"root"},arguments:[],directives:[],selectionSet:void 0}]}}]}}]}}],loc:{start:0,end:136,source:{body:"query($path:String!){\n        svnInfo(path:$path) {\n          url,\n          repository {\n            root\n          }\n        }\n      }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},variables:{path:this.path}});case 2:t=e.sent,n=t.data.svnInfo,i=n.url,a=n.repository.root,this.url=i,this.root=a,this.remote_base=i.replace(a,"");case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"clearLogs",value:function(){this.logs=[]}},{key:"path",get:function(){return this.$route.params.id}}]),t}(s["d"]);_e=l["b"]([Object(s["a"])({components:{SvnLocal:x,SvnMerge:ve,SvnLog:W,MyDialog:F["a"]}})],_e);var Ve=_e,Oe=Ve,xe=n("7d34"),De=n.n(xe),$e=Object(V["a"])(Oe,i,a,!1,null,null,null);"function"===typeof De.a&&De()($e);t["default"]=$e.exports}}]);