(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["generator-form~generator-table"],{9498:function(t,e,n){"use strict";var a=n("b17e");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){r(t,e,n[e])})}return t}var o=n("c665"),s=n("aa9a");function i(t){return Object.keys(t).map(function(e){var n=t[e];if(void 0!==n&&null!==n){var a='"';return"string"===typeof n&&n.indexOf('"')>-1&&(a="'"),"".concat(e,"=").concat(a).concat(n).concat(a)}}).filter(Boolean).join(" ")}function m(t){var e=t.name,n=t.attrs,a=t.content,r=t.schema;return r&&r.attrs&&(n=Object.assign({},n,r.attrs)),"input"===e?"<".concat(e).concat(n?" "+i(n):"",">"):(Array.isArray(a)&&(a=a.join("")),"<".concat(e).concat(n?" "+i(n):"",">").concat(a||"","</").concat(e,">"))}function u(t){var e=t.content,n=t.styles,a=t.scripts;return'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n  <title>表单</title>\n  '.concat(n,"\n</head>\n<body>\n  ").concat(e,"\n  ").concat(a,"\n</body>\n</html>")}var l=function(){function t(){Object(o["a"])(this,t),this.scripts=[]}return Object(s["a"])(t,[{key:"normalizeSchema",value:function(t,e){var n=this;if(Object.assign(t,e),"object"===t.type||"array"===t.type){var a,r=t.required||[],c=t._path;a="object"===t.type?t.properties=t.properties||{}:t.items=t.items||{},Object.keys(a).forEach(function(e){var o=a[e];r.includes(e)&&(o.required=!0),n.normalizeSchema(o,{_path:n.getName(e,c&&c+("object"===t.type?"":"[]")),_path_parent:c,key:e})})}}},{key:"getId",value:function(t){return t+Math.random().toString().substring(2)}},{key:"getSchemaResult",value:function(t){return"number"===t.schema.type?this.parseNumber(t):"array"===t.schema.type?this.parseArray(t):"boolean"===t.schema.type?this.parseBoolean(t):"object"===t.schema.type?this.parseObject(t):this.parseString(t)}},{key:"getName",value:function(t,e){return e?"".concat(e,"[").concat(t,"]"):t}},{key:"getItemWrap",value:function(t,e){return m({name:"div",attrs:e,content:t})}},{key:"getRules",value:function(t){return{required:t.required,max:t.max,min:t.min,pattern:t.pattern}}},{key:"getExtraAttrs",value:function(t){return t.attrs||{}}},{key:"getLabel",value:function(t,e){return e?"":m({name:"label",content:t.title})}},{key:"parseNumber",value:function(t){var e=t.schema,n=t.ignore_title,a=t.name;return this.getItemWrap([this.getLabel(e,n),m({name:"input",attrs:c({type:"number",value:e.default,name:a},this.getRules(e),this.getExtraAttrs(e))})])}},{key:"parseString",value:function(t){var e=t.schema,n=t.ignore_title,a=t.name;return this.getItemWrap([this.getLabel(e,n),m({name:"input",attrs:c({type:e.format,value:e.default,name:a},this.getRules(e),this.getExtraAttrs(e))})])}},{key:"parseBoolean",value:function(t){var e=t.schema,n=t.ignore_title,a=t.name;return this.getItemWrap([this.getLabel(e,n),m({name:"input",attrs:c({type:"checkbox",checked:e.default?"checked":void 0,name:a},this.getRules(e),this.getExtraAttrs(e))})])}},{key:"parseObject",value:function(t){var e=this,n=t.schema,a=t.ignore_title,r=t.name,c=n.required||[],o=Object.keys(n.properties||{}).map(function(t){var a=n.properties[t];c.includes(t)&&(a.required=!0);var o=e.getName(t,r);return e.getSchemaResult({schema:a,name:o})}).join("");return m({name:"fieldset",attrs:this.getExtraAttrs(n),content:[!a&&n.title?m({name:"legend"}):"",o]})}},{key:"parseArray",value:function(t){var e=this,n=t.schema,a=t.ignore_title,r=t.name,o="",s="",i=this.getId("button"),u=this.getId("table"),l=this.getId("id");return Object.keys(n.items||{}).forEach(function(t){var a=n.items[t];o+=m({name:"th",content:a.title}),s+=m({name:"td",content:e.getSchemaResult({schema:a,name:e.getName(t,"".concat(r,"[${").concat(l,"}]")),ignore_title:!0})})}),o=m({name:"tr",content:[o,m({name:"th",content:"操作"})]}),s=m({name:"tr",content:[s,m({name:"td",content:m({name:"button",attrs:{type:"button",class:"j-del"},content:"删除"})})]}),this.scripts.push("var ".concat(l," = 0\n    var ").concat(i," = document.getElementById('").concat(i,"')\n    var ").concat(u," = document.getElementById('").concat(u,"')\n    ").concat(i,".addEventListener('click', function() {\n      var tr = document.createElement('tr')\n      ").concat(l,"++\n      tr.innerHTML = `").concat(s,"`\n      ").concat(u,".querySelector('tbody').appendChild(tr)\n    })\n    ").concat(u,".addEventListener('click', function(e) {\n      if (e.target.classList.contains('j-del')) {\n        var tr = e.target.parentNode.parentNode\n        tr.parentNode.removeChild(tr)\n      }\n    })")),this.getItemWrap([m({name:"table",attrs:c({id:u,border:"1"},this.getExtraAttrs(n)),content:[a?"":m({name:"caption",content:n.title}),m({name:"thead",content:o}),m({name:"tbody"})]}),m({name:"button",attrs:{type:"button",id:i},content:"添加一行"})])}},{key:"getForm",value:function(t){return m({name:"form",attrs:{action:"",method:"post"},content:t})}},{key:"getAction",value:function(){return m({name:"button",content:"保存"})}},{key:"parse",value:function(t){var e=t.schema,n=t.single_file,a=t.styles,r=t.scripts,c=this.getForm(this.getSchemaResult({schema:e})+this.getAction());return this.scripts.length>0&&(r+="<script>".concat(this.scripts.join("\n"),"</scrip")+"t>"),n?c:u({content:c,styles:a,scripts:r})}}]),t}();function p(t){var e=t.map(function(t){return m({name:"th",content:t.text})}).join("");return m({name:"table",attrs:{style:"width:100%"},content:[m({name:"thead",content:e}),m({name:"tbody"})]})}var d=n("dc0a"),h=n("d328"),y=n("11d9"),b=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(h["a"])(this,Object(y["a"])(e).apply(this,arguments)),t.methods=[],t}return Object(s["a"])(e,[{key:"getName",value:function(t,e){return e?/[^\w$]/.test(t)?"".concat(e,"[").concat(t,"]"):"".concat(e,".").concat(t):t}},{key:"getItemWrap",value:function(t,e){return e&&(e.dynamic_prop?(e[":prop"]=e.dynamic_prop.replace(/model\./,""),delete e.prop,delete e.dynamic_prop):e.prop&&(e.prop=e.prop.replace(/model\./,""))),m({name:"el-form-item",attrs:e,content:t})}},{key:"getRules",value:function(t){var e=[],n=t.messages||{};if(t.required&&e.push({required:!0,message:n.required}),(t.minimum||t.maximum)&&e.push({min:t.minimum,max:t.maximum,message:n.range}),"array"===t.type&&e.push({type:"array",message:n.array}),t.format&&e.push({type:t.format,message:n.format}),e.length>0)return JSON.stringify(e)}},{key:"getForm",value:function(t){return this.methods.push("submit() {\n      console.log(this.model)\n    }"),'<el-form :model="model" status-icon @submit.native.prevent="submit">'.concat(t,"</el-form>")}},{key:"getAction",value:function(){return this.methods.push("reset() {\n      console.log(this.model)\n    }"),this.getItemWrap(m({name:"el-button",attrs:{type:"primary","native-type":"submit"},content:"提交"})+m({name:"el-button",attrs:{"@click":"reset"},content:"重置"}))}},{key:"parseNumber",value:function(t){var e,n=t.schema,a=t.ignore_title,r=t.name,c=t.key,o=t.parent,s=t.dynamic_prop,i=a?void 0:n.title;return o&&(o[c]=n.default||null),e="rate"===n.ui?m({name:"el-rate",attrs:{"v-model":r},schema:n}):m({name:"el-input-number",attrs:{"v-model":r,min:n.minimum,max:n.maximum},schema:n}),this.getItemWrap(e,{label:i,prop:r,dynamic_prop:s,":rules":this.getRules(n)})}},{key:"parseString",value:function(t){var e,n=t.schema,a=t.ignore_title,r=t.name,c=t.key,o=t.parent,s=t.dynamic_prop,i=a?void 0:n.title;return o&&(o[c]=n.default||null),e=n.enum?"radios"===n.ui?m({name:"el-radio-group",attrs:{"v-model":r},content:n.enum.map(function(t){return m({name:"el-radio",attrs:{label:t}})}),schema:n}):m({name:"el-select",attrs:{"v-model":r},content:n.enum.map(function(t){return m({name:"el-option",attrs:{label:t,value:t}})}),schema:n}):["date","daterange","datetime","datetimerange"].includes(n.format)?m({name:"el-date-picker",attrs:{"v-model":r,type:n.format},schema:n}):"time"===n.format?m({name:"el-time-select",attrs:{"v-model":r},schema:n}):"image"===n.format?m({name:"el-upload",attrs:{"v-model":r,drag:!0,action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card"},content:'<i class="el-icon-upload"></i>\n  <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>\n  <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>',schema:n}):"color"===n.format?m({name:"el-color-picker",attrs:{"v-model":r},schema:n}):m({name:"el-input",attrs:{"v-model":r},schema:n}),this.getItemWrap(e,{label:i,prop:r,dynamic_prop:s,":rules":this.getRules(n)})}},{key:"parseBoolean",value:function(t){var e,n=t.schema,a=t.ignore_title,r=t.name,c=t.key,o=t.parent,s=t.dynamic_prop,i=a?void 0:n.title;return o&&(o[c]=n.default||null),e="switch"===n.ui?m({name:"el-switch",attrs:{"v-model":r},schema:n}):m({name:"el-checkbox",attrs:{"v-model":r},schema:n}),this.getItemWrap(e,{label:i,prop:r,dynamic_prop:s,":rules":this.getRules(n)})}},{key:"parseObject",value:function(t){var e=this,n=t.schema,a=t.ignore_title,r=t.name,c=t.key,o=t.parent,s=t.dynamic_prop,i=a?void 0:n.title,u=o&&(o[c]=n.default||{}),l=Object.keys(n.properties||{}).map(function(t){var a=n.properties[t];return e.getSchemaResult({schema:a,key:t,name:e.getName(t,r),parent:u,dynamic_prop:s})}).join("");return m({name:"el-card",attrs:{class:"box-card"},content:[m({name:"div",attrs:{slot:"header"},content:i}),l]})}},{key:"parseArray",value:function(t){var e=this,n=t.schema,a=t.ignore_title,r=t.name,c=t.key,o=t.parent,s=t.dynamic_prop,i=a?void 0:n.title;o&&(o[c]=n.default||[]);var u={},l=Object.keys(n.items).map(function(t){var a=n.items[t];return u[t]=a.default||null,m({name:"el-table-column",attrs:{label:a.title,prop:t},content:m({name:"template",attrs:{"slot-scope":"{row,$index}"},content:e.getSchemaResult({schema:a,name:e.getName(t,"row"),dynamic_prop:"`".concat(r,".${$index}.").concat(t,"`"),key:t,ignore_title:!0})})})}),p=this.getId("delLine");this.methods.push("".concat(p,"({$index}){\n      this.").concat(r,".splice($index, 1)\n    }")),l.push(m({name:"el-table-column",attrs:{label:"操作"},content:m({name:"template",attrs:{"slot-scope":"scope"},content:m({name:"el-button",attrs:{"@click":"".concat(p,"(scope)"),size:"mini",type:"danger"},content:"删除"})})}));var d=this.getId("newLine");return this.methods.push("".concat(d,"(){\n      this.").concat(r,".push(").concat(JSON.stringify(u),")\n    }")),this.getItemWrap([m({name:"el-table",attrs:{":data":r},content:l.join(""),schema:n}),m({name:"el-button",attrs:{"@click":d,size:"mini",type:"success"},content:"新增"})],{label:i,prop:r,dynamic_prop:s,":rules":this.getRules(n)})}},{key:"parse",value:function(t){var e=t.schema,n=t.single_file,a=t.styles,r=t.scripts,c={},o=this.getForm(this.getSchemaResult({schema:e,name:"model",key:"model",parent:c})+this.getAction()),s="{\n      ".concat("data() {\n        return ".concat(JSON.stringify(c,null,2),"\n      },\n      methods: {\n        ").concat(this.methods.join(",\n"),"\n      }"),"\n    }");return n?"<template>\n      ".concat(o,"\n      </template>\n      <script>\n      export default ").concat(s,"\n      </scrip")+"t>":(r+="<script>var vue = new Vue(".concat(s,").$mount('#app')</scrip")+"t>",u({content:'<div id="app">'.concat(o,"</div>"),scripts:r,styles:a}))}}]),Object(d["a"])(e,t),e}(l);function g(t){var e=t.map(function(t){return m({name:"el-table-column",attrs:{prop:t.name,label:t.text}})}).join("");return m({name:"el-table",attrs:{":data":"tableData"},content:e})}var v=function(t){function e(){return Object(o["a"])(this,e),Object(h["a"])(this,Object(y["a"])(e).apply(this,arguments))}return Object(s["a"])(e,[{key:"parseBoolean",value:function(){return'<Form.Item>\n          {getFieldDecorator(\'remember\', {\n            valuePropName: \'checked\',\n            initialValue: true,\n          })(\n            <Checkbox>Remember me</Checkbox>\n          )}\n          <a className="login-form-forgot" href="">Forgot password</a>\n          <Button type="primary" htmlType="submit" className="login-form-button">\n            Log in\n          </Button>\n          Or <a href="">register now!</a>\n        </Form.Item>'}},{key:"parseString",value:function(){return"<Form.Item>\n          {getFieldDecorator('userName', {\n            rules: [{ required: true, message: 'Please input your username!' }],\n          })(\n            <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\n          )}\n        </Form.Item>"}},{key:"getForm",value:function(t){return"<Form onSubmit={this.handleSubmit}>".concat(t,"</Form>")}}]),Object(d["a"])(e,t),e}(l);function f(t){var e=t.map(function(t){return{title:t.text,dataIndex:t.name,key:t.name}});return"<Table dataSource={dataSource} columns={".concat(JSON.stringify(e),"} />")}n.d(e,"d",function(){return j}),n.d(e,"c",function(){return O}),n.d(e,"b",function(){return _}),n.d(e,"a",function(){return w}),n.d(e,"e",function(){return x});var k={vue:{uis:[{name:"element-ui",scripts:["https://cdn.bootcss.com/element-ui/2.5.4/index.js"],links:["https://cdn.bootcss.com/element-ui/2.5.4/theme-chalk/index.css"]},{name:"iview",scripts:["https://cdn.bootcss.com/iview/3.2.2-rc.1/iview.min.js"],links:["https://cdn.bootcss.com/iview/3.2.2-rc.1/styles/iview.css"]}],scripts:["https://cdn.bootcss.com/vue/2.6.4/vue.min.js"]},react:{uis:[{name:"anted",scripts:["https://cdn.bootcss.com/antd/3.13.2/antd.js"],links:["https://cdn.bootcss.com/antd/3.13.2/antd.css"]}],scripts:["https://cdn.bootcss.com/react/16.8.1/cjs/react.production.min.js","https://cdn.bootcss.com/react-dom/16.8.1/cjs/react-dom.production.min.js","https://cdn.bootcss.com/babel-standalone/6.26.0/babel.min.js"]},jquery:{uis:[{name:"bootstrap",scripts:["https://cdn.bootcss.com/twitter-bootstrap/4.2.1/js/bootstrap.min.js"],links:["https://cdn.bootcss.com/twitter-bootstrap/4.2.1/css/bootstrap.min.css"]}],scripts:["https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js","https://cdn.bootcss.com/jquery-validate/1.19.0/jquery.validate.min.js"]},"通用":{uis:[{name:"通用",scripts:[],links:[]}],scripts:[]}};function j(){return[{value:"file",text:"单文件格式"},{value:"html",text:"html"}]}function O(){return Object.keys(k)}function _(t){return Object(a["b"])(k[t])}function w(t,e){e.framework;var n,a=e.ui,r=e.output_format,c=e.scripts,o=e.styles;return n="element-ui"===a?new b:"antd"===a?new v:new l,n.normalizeSchema(t,{}),n.parse({schema:t,single_file:"file"===r,scripts:c,styles:o})}function x(t,e){return"element-ui"===e?g(t):"antd"===e?f(t):p(t)}}}]);