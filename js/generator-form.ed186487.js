(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["generator-form"],{"028b":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.exportFile}},[t._t("default")],2)},a=[],s=n("9ab4"),i=n("60a3");let o=class extends i["d"]{exportFile(){var t=URL.createObjectURL(new Blob([this.value()],{type:this.type})),e=document.createElement("a");e.href=t,e.download=this.filename,e.click(),URL.revokeObjectURL(t)}};s["a"]([Object(i["c"])(Function)],o.prototype,"value",void 0),s["a"]([Object(i["c"])({type:String,default:"application/json"})],o.prototype,"type",void 0),s["a"]([Object(i["c"])(String)],o.prototype,"filename",void 0),o=s["a"]([Object(i["a"])({})],o);var l=o,c=l,m=(n("7bc2"),n("2877")),u=Object(m["a"])(c,r,a,!1,null,null,null);u.options.__file="ExportFile.vue";e["a"]=u.exports},"12d2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"fill-height":"",column:""}},[n("div",{staticClass:"mx-1"},[n("v-layout",[n("import-file",{on:{input:function(e){t.model=e}}},[n("v-btn",{attrs:{small:""}},[t._v("导入")])],1),n("v-btn",{attrs:{small:""},on:{click:t.loadDemo}},[t._v("加载样例")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",small:""},on:{click:t.updateResult}},[t._v("生成")]),n("export-file",{attrs:{value:t.getResult,type:"text/html",filename:"表单"}},[n("v-btn",{attrs:{small:""}},[t._v("导出")])],1),"html"===t.output_format?n("v-btn",{attrs:{small:""},on:{click:t.preview}},[t._v("\n        预览\n      ")]):t._e(),n("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.show_dialog=!0}}},[n("v-icon",[t._v("settings")])],1)],1)],1),n("v-layout",{staticStyle:{flex:"1"},attrs:{"align-content-center":""}},[n("code-editor",{staticStyle:{width:"50%"},attrs:{lang:"json"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),n("code-editor",{staticStyle:{width:"50%"},attrs:{lang:"react"===t.framework?"jsx":"html"},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}})],1),n("x-dialog",{attrs:{title:"配置"},model:{value:t.show_dialog,callback:function(e){t.show_dialog=e},expression:"show_dialog"}},[n("v-select",{attrs:{label:"框架",items:t.frameworks},model:{value:t.framework,callback:function(e){t.framework=e},expression:"framework"}}),n("v-select",{attrs:{label:"ui",items:t.uis},model:{value:t.ui,callback:function(e){t.ui=e},expression:"ui"}}),n("v-select",{attrs:{label:"生成格式",items:t.output_formats},model:{value:t.output_format,callback:function(e){t.output_format=e},expression:"output_format"}}),"html"===t.output_format?[n("v-textarea",{attrs:{label:"脚本"},model:{value:t.scripts,callback:function(e){t.scripts=e},expression:"scripts"}}),n("v-textarea",{attrs:{label:"样式"},model:{value:t.styles,callback:function(e){t.styles=e},expression:"styles"}})]:t._e()],2)],1)},a=[],s=n("9ab4"),i=n("60a3"),o=n("864f"),l=n("c35a"),c=n("028b"),m=n("9498");let u=class extends i["d"]{constructor(){super(...arguments),this.model="",this.result="",this.ui="",this.output_format="html",this.framework="vue",this.scripts="",this.styles="",this.frameworks=Object(m["c"])(),this.output_formats=Object(m["d"])(),this.uis=[],this.show_dialog=!1}loadDemo(){this.model=JSON.stringify({type:"object",title:"表单",properties:{a:{title:"标题a",type:"number"},b:{title:"特殊资源",type:"string",ui:"radios",enum:["线上品牌","线下品牌"]},table:{title:"表格",type:"array",items:{table_f1:{type:"boolean",title:"表格字段1"},table_f2:{type:"string",title:"表格字段2"}}},c:{type:"object",title:"对象c",properties:{email:{type:"string",title:"邮箱",format:"email"},url:{type:"string",title:"url",format:"url"}},required:["email"]}}})}get conf(){return Object(m["b"])(this.framework)}onFrameworkChange(){this.$nextTick(()=>{this.uis=this.conf.uis.map(({name:t})=>t),this.uis.includes(this.ui)||(this.scripts=this.conf.scripts.map(t=>`<script src="${t}"></scrip`+"t>").join("\n"),this.styles="",this.ui=this.uis[0])})}onModelChange(){clearTimeout(this.timer),this.timer=setTimeout(this.updateResult,300)}updateResult(){if(this.model)try{var t=JSON.parse(this.model);try{this.result=Object(m["a"])(t,{framework:this.framework,ui:this.ui,output_format:this.output_format,scripts:this.scripts,styles:this.styles})}catch(t){console.error(t)}}catch(t){}}getResult(){return this.result}onUiChange(t){let e=this.conf.uis.find(({name:e})=>e===t);e&&(this.scripts+="\n"+e.scripts.map(t=>`<script src="${t}"></scrip`+"t>").join("\n"),this.styles+=e.links.map(t=>`<link rel="stylesheet" href="${t}">`).join("\n"))}preview(){var t=window.open("","_blank");t.document.write(this.result),t.document.close()}};s["a"]([Object(i["e"])("framework",{immediate:!0})],u.prototype,"onFrameworkChange",null),s["a"]([Object(i["e"])("model")],u.prototype,"onModelChange",null),s["a"]([Object(i["e"])("ui")],u.prototype,"onUiChange",null),u=s["a"]([Object(i["a"])({components:{CodeEditor:o["a"],ImportFile:l["a"],ExportFile:c["a"]}})],u);var p=u,d=p,h=(n("e086"),n("2877")),b=Object(h["a"])(d,r,a,!1,null,null,null);b.options.__file="form.vue";e["default"]=b.exports},"33b3":function(t,e,n){},"7bc2":function(t,e,n){"use strict";var r=n("33b3"),a=n.n(r);a.a},"8f64":function(t,e,n){},"92da":function(t,e,n){"use strict";var r=n("ce0f"),a=n.n(r);a.a},9498:function(t,e,n){"use strict";var r=n("b17e");function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){a(t,e,n[e])})}return t}function i(t){return Object.keys(t).map(e=>{var n=t[e];if(void 0!==n&&null!==n){var r='"';return"string"===typeof n&&n.indexOf('"')>-1&&(r="'"),`${e}=${r}${n}${r}`}}).filter(Boolean).join(" ")}function o({name:t,attrs:e,content:n,schema:r}){return r&&r.attrs&&(e=Object.assign({},e,r.attrs)),"input"===t?`<${t}${e?" "+i(e):""}>`:(Array.isArray(n)&&(n=n.join("")),`<${t}${e?" "+i(e):""}>${n||""}</${t}>`)}function l({content:t,styles:e,scripts:n}){return`<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n  <title>表单</title>\n  ${e}\n</head>\n<body>\n  ${t}\n  ${n}\n</body>\n</html>`}class c{constructor(){this.scripts=[]}normalizeSchema(t,e){if(Object.assign(t,e),"object"===t.type||"array"===t.type){let e,n=t.required||[],r=t._path;e="object"===t.type?t.properties=t.properties||{}:t.items=t.items||{},Object.keys(e).forEach(a=>{var s=e[a];n.includes(a)&&(s.required=!0),this.normalizeSchema(s,{_path:this.getName(a,r&&r+("object"===t.type?"":"[]")),_path_parent:r,key:a})})}}getId(t){return t+Math.random().toString().substring(2)}getSchemaResult(t){return"number"===t.schema.type?this.parseNumber(t):"array"===t.schema.type?this.parseArray(t):"boolean"===t.schema.type?this.parseBoolean(t):"object"===t.schema.type?this.parseObject(t):this.parseString(t)}getName(t,e){return e?`${e}[${t}]`:t}getItemWrap(t,e){return o({name:"div",attrs:e,content:t})}getRules(t){return{required:t.required,max:t.max,min:t.min,pattern:t.pattern}}getExtraAttrs(t){return t.attrs||{}}getLabel(t,e){return e?"":o({name:"label",content:t.title})}parseNumber({schema:t,ignore_title:e,name:n}){return this.getItemWrap([this.getLabel(t,e),o({name:"input",attrs:s({type:"number",value:t.default,name:n},this.getRules(t),this.getExtraAttrs(t))})])}parseString({schema:t,ignore_title:e,name:n}){return this.getItemWrap([this.getLabel(t,e),o({name:"input",attrs:s({type:t.format,value:t.default,name:n},this.getRules(t),this.getExtraAttrs(t))})])}parseBoolean({schema:t,ignore_title:e,name:n}){return this.getItemWrap([this.getLabel(t,e),o({name:"input",attrs:s({type:"checkbox",checked:t.default?"checked":void 0,name:n},this.getRules(t),this.getExtraAttrs(t))})])}parseObject({schema:t,ignore_title:e,name:n}){var r=t.required||[],a=Object.keys(t.properties||{}).map(e=>{let a=t.properties[e];r.includes(e)&&(a.required=!0);let s=this.getName(e,n);return this.getSchemaResult({schema:a,name:s})}).join("");return o({name:"fieldset",attrs:this.getExtraAttrs(t),content:[!e&&t.title?o({name:"legend"}):"",a]})}parseArray({schema:t,ignore_title:e,name:n}){var r="",a="",i=this.getId("button"),l=this.getId("table"),c=this.getId("id");return Object.keys(t.items||{}).forEach(e=>{var s=t.items[e];r+=o({name:"th",content:s.title}),a+=o({name:"td",content:this.getSchemaResult({schema:s,name:this.getName(e,`${n}[\${${c}}]`),ignore_title:!0})})}),r=o({name:"tr",content:[r,o({name:"th",content:"操作"})]}),a=o({name:"tr",content:[a,o({name:"td",content:o({name:"button",attrs:{type:"button",class:"j-del"},content:"删除"})})]}),this.scripts.push(`var ${c} = 0\n    var ${i} = document.getElementById('${i}')\n    var ${l} = document.getElementById('${l}')\n    ${i}.addEventListener('click', function() {\n      var tr = document.createElement('tr')\n      ${c}++\n      tr.innerHTML = \`${a}\`\n      ${l}.querySelector('tbody').appendChild(tr)\n    })\n    ${l}.addEventListener('click', function(e) {\n      if (e.target.classList.contains('j-del')) {\n        var tr = e.target.parentNode.parentNode\n        tr.parentNode.removeChild(tr)\n      }\n    })`),this.getItemWrap([o({name:"table",attrs:s({id:l,border:"1"},this.getExtraAttrs(t)),content:[e?"":o({name:"caption",content:t.title}),o({name:"thead",content:r}),o({name:"tbody"})]}),o({name:"button",attrs:{type:"button",id:i},content:"添加一行"})])}getForm(t){return o({name:"form",attrs:{action:"",method:"post"},content:t})}getAction(){return o({name:"button",content:"保存"})}parse({schema:t,single_file:e,styles:n,scripts:r}){var a=this.getForm(this.getSchemaResult({schema:t})+this.getAction());return this.scripts.length>0&&(r+=`<script>${this.scripts.join("\n")}</scrip`+"t>"),e?a:l({content:a,styles:n,scripts:r})}}function m(t){var e=t.map(t=>o({name:"th",content:t.text})).join("");return o({name:"table",attrs:{style:"width:100%"},content:[o({name:"thead",content:e}),o({name:"tbody"})]})}class u extends c{constructor(){super(...arguments),this.methods=[]}getName(t,e){return e?/[^\w$]/.test(t)?`${e}[${t}]`:`${e}.${t}`:t}getItemWrap(t,e){return e&&(e.dynamic_prop?(e[":prop"]=e.dynamic_prop.replace(/model\./,""),delete e.prop,delete e.dynamic_prop):e.prop&&(e.prop=e.prop.replace(/model\./,""))),o({name:"el-form-item",attrs:e,content:t})}getRules(t){var e=[],n=t.messages||{};if(t.required&&e.push({required:!0,message:n.required}),(t.minimum||t.maximum)&&e.push({min:t.minimum,max:t.maximum,message:n.range}),"array"===t.type&&e.push({type:"array",message:n.array}),t.format&&e.push({type:t.format,message:n.format}),e.length>0)return JSON.stringify(e)}getForm(t){return this.methods.push("submit() {\n      console.log(this.model)\n    }"),`<el-form :model="model" status-icon @submit.native.prevent="submit">${t}</el-form>`}getAction(){return this.methods.push("reset() {\n      console.log(this.model)\n    }"),this.getItemWrap(o({name:"el-button",attrs:{type:"primary","native-type":"submit"},content:"提交"})+o({name:"el-button",attrs:{"@click":"reset"},content:"重置"}))}parseNumber({schema:t,ignore_title:e,name:n,key:r,parent:a,dynamic_prop:s}){var i,l=e?void 0:t.title;return a&&(a[r]=t.default||null),i="rate"===t.ui?o({name:"el-rate",attrs:{"v-model":n},schema:t}):o({name:"el-input-number",attrs:{"v-model":n,min:t.minimum,max:t.maximum},schema:t}),this.getItemWrap(i,{label:l,prop:n,dynamic_prop:s,":rules":this.getRules(t)})}parseString({schema:t,ignore_title:e,name:n,key:r,parent:a,dynamic_prop:s}){var i,l=e?void 0:t.title;return a&&(a[r]=t.default||null),i=t.enum?"radios"===t.ui?o({name:"el-radio-group",attrs:{"v-model":n},content:t.enum.map(t=>o({name:"el-radio",attrs:{label:t}})),schema:t}):o({name:"el-select",attrs:{"v-model":n},content:t.enum.map(t=>o({name:"el-option",attrs:{label:t,value:t}})),schema:t}):["date","daterange","datetime","datetimerange"].includes(t.format)?o({name:"el-date-picker",attrs:{"v-model":n,type:t.format},schema:t}):"time"===t.format?o({name:"el-time-select",attrs:{"v-model":n},schema:t}):"image"===t.format?o({name:"el-upload",attrs:{"v-model":n,drag:!0,action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card"},content:'<i class="el-icon-upload"></i>\n  <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>\n  <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>',schema:t}):"color"===t.format?o({name:"el-color-picker",attrs:{"v-model":n},schema:t}):o({name:"el-input",attrs:{"v-model":n},schema:t}),this.getItemWrap(i,{label:l,prop:n,dynamic_prop:s,":rules":this.getRules(t)})}parseBoolean({schema:t,ignore_title:e,name:n,key:r,parent:a,dynamic_prop:s}){var i,l=e?void 0:t.title;return a&&(a[r]=t.default||null),i="switch"===t.ui?o({name:"el-switch",attrs:{"v-model":n},schema:t}):o({name:"el-checkbox",attrs:{"v-model":n},schema:t}),this.getItemWrap(i,{label:l,prop:n,dynamic_prop:s,":rules":this.getRules(t)})}parseObject({schema:t,ignore_title:e,name:n,key:r,parent:a,dynamic_prop:s}){var i=e?void 0:t.title,l=a&&(a[r]=t.default||{}),c=Object.keys(t.properties||{}).map(e=>{var r=t.properties[e];return this.getSchemaResult({schema:r,key:e,name:this.getName(e,n),parent:l,dynamic_prop:s})}).join("");return o({name:"el-card",attrs:{class:"box-card"},content:[o({name:"div",attrs:{slot:"header"},content:i}),c]})}parseArray({schema:t,ignore_title:e,name:n,key:r,parent:a,dynamic_prop:s}){var i=e?void 0:t.title;a&&(a[r]=t.default||[]);var l={},c=Object.keys(t.items).map(e=>{var r=t.items[e];return l[e]=r.default||null,o({name:"el-table-column",attrs:{label:r.title,prop:e},content:o({name:"template",attrs:{"slot-scope":"{row,$index}"},content:this.getSchemaResult({schema:r,name:this.getName(e,"row"),dynamic_prop:`\`${n}.\${$index}.${e}\``,key:e,ignore_title:!0})})})}),m=this.getId("delLine");this.methods.push(`${m}({$index}){\n      this.${n}.splice($index, 1)\n    }`),c.push(o({name:"el-table-column",attrs:{label:"操作"},content:o({name:"template",attrs:{"slot-scope":"scope"},content:o({name:"el-button",attrs:{"@click":`${m}(scope)`,size:"mini",type:"danger"},content:"删除"})})}));let u=this.getId("newLine");return this.methods.push(`${u}(){\n      this.${n}.push(${JSON.stringify(l)})\n    }`),this.getItemWrap([o({name:"el-table",attrs:{":data":n},content:c.join(""),schema:t}),o({name:"el-button",attrs:{"@click":u,size:"mini",type:"success"},content:"新增"})],{label:i,prop:n,dynamic_prop:s,":rules":this.getRules(t)})}parse({schema:t,single_file:e,styles:n,scripts:r}){var a={},s=this.getForm(this.getSchemaResult({schema:t,name:"model",key:"model",parent:a})+this.getAction());let i=`{\n      ${`data() {\n        return ${JSON.stringify(a,null,2)}\n      },\n      methods: {\n        ${this.methods.join(",\n")}\n      }`}\n    }`;return e?`<template>\n      ${s}\n      </template>\n      <script>\n      export default ${i}\n      </scrip`+"t>":(r+=`<script>var vue = new Vue(${i}).$mount('#app')</scrip`+"t>",l({content:`<div id="app">${s}</div>`,scripts:r,styles:n}))}}function p(t){var e=t.map(t=>o({name:"el-table-column",attrs:{prop:t.name,label:t.text}})).join("");return o({name:"el-table",attrs:{":data":"tableData"},content:e})}class d extends c{parseBoolean(){return'<Form.Item>\n          {getFieldDecorator(\'remember\', {\n            valuePropName: \'checked\',\n            initialValue: true,\n          })(\n            <Checkbox>Remember me</Checkbox>\n          )}\n          <a className="login-form-forgot" href="">Forgot password</a>\n          <Button type="primary" htmlType="submit" className="login-form-button">\n            Log in\n          </Button>\n          Or <a href="">register now!</a>\n        </Form.Item>'}parseString(){return"<Form.Item>\n          {getFieldDecorator('userName', {\n            rules: [{ required: true, message: 'Please input your username!' }],\n          })(\n            <Input prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"Username\" />\n          )}\n        </Form.Item>"}getForm(t){return`<Form onSubmit={this.handleSubmit}>${t}</Form>`}}function h(t){var e=t.map(t=>({title:t.text,dataIndex:t.name,key:t.name}));return`<Table dataSource={dataSource} columns={${JSON.stringify(e)}} />`}n.d(e,"d",function(){return f}),n.d(e,"c",function(){return g}),n.d(e,"b",function(){return y}),n.d(e,"a",function(){return v}),n.d(e,"e",function(){return j});const b={vue:{uis:[{name:"element-ui",scripts:["https://cdn.bootcss.com/element-ui/2.5.4/index.js"],links:["https://cdn.bootcss.com/element-ui/2.5.4/theme-chalk/index.css"]},{name:"iview",scripts:["https://cdn.bootcss.com/iview/3.2.2-rc.1/iview.min.js"],links:["https://cdn.bootcss.com/iview/3.2.2-rc.1/styles/iview.css"]}],scripts:["https://cdn.bootcss.com/vue/2.6.4/vue.min.js"]},react:{uis:[{name:"anted",scripts:["https://cdn.bootcss.com/antd/3.13.2/antd.js"],links:["https://cdn.bootcss.com/antd/3.13.2/antd.css"]}],scripts:["https://cdn.bootcss.com/react/16.8.1/cjs/react.production.min.js","https://cdn.bootcss.com/react-dom/16.8.1/cjs/react-dom.production.min.js","https://cdn.bootcss.com/babel-standalone/6.26.0/babel.min.js"]},jquery:{uis:[{name:"bootstrap",scripts:["https://cdn.bootcss.com/twitter-bootstrap/4.2.1/js/bootstrap.min.js"],links:["https://cdn.bootcss.com/twitter-bootstrap/4.2.1/css/bootstrap.min.css"]}],scripts:["https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js","https://cdn.bootcss.com/jquery-validate/1.19.0/jquery.validate.min.js"]},"通用":{uis:[{name:"通用",scripts:[],links:[]}],scripts:[]}};function f(){return[{value:"file",text:"单文件格式"},{value:"html",text:"html"}]}function g(){return Object.keys(b)}function y(t){return Object(r["b"])(b[t])}function v(t,{framework:e,ui:n,output_format:r,scripts:a,styles:s}){var i;return i="element-ui"===n?new u:"antd"===n?new d:new c,i.normalizeSchema(t,{}),i.parse({schema:t,single_file:"file"===r,scripts:a,styles:s})}function j(t,e){return"element-ui"===e?p(t):"antd"===e?h(t):m(t)}},c35a:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.onClick}},[n("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:t.accept},on:{change:t.onChange}}),t._t("default")],2)},a=[],s=n("9ab4"),i=n("60a3");let o=class extends i["d"]{onChange(t){var e=t.target.files,n=new FileReader;n.readAsText(e[0]),n.onload=(t=>{this.$emit("input",t.target.result)})}onClick(){this.$refs.file.click()}};s["a"]([Object(i["c"])(String)],o.prototype,"accept",void 0),o=s["a"]([Object(i["a"])({})],o);var l=o,c=l,m=(n("92da"),n("2877")),u=Object(m["a"])(c,r,a,!1,null,null,null);u.options.__file="ImportFile.vue";e["a"]=u.exports},ce0f:function(t,e,n){},e086:function(t,e,n){"use strict";var r=n("8f64"),a=n.n(r);a.a}}]);