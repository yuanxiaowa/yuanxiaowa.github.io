(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apidoc-index~editor-index~explorer-index~json-index~special-index~svn-index~terminal-index"],{1551:function(t,e,n){},"199d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("data-table",{ref:"table",attrs:{title:t.title,fields:t.fields,gql:t.gql_list}},[n("template",{slot:"actions"},[t.has_add?n("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(e){t.onEdit()}}},[n("v-icon",[t._v("add")])],1):t._e(),t.has_add?n("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:t.refreshTable}},[n("v-icon",[t._v("refresh")])],1):t._e()],1)],2),n("my-dialog",{attrs:{width:t.dialogWidth,persistent:"",title:t.dialog_title},model:{value:t.show_edit,callback:function(e){t.show_edit=e},expression:"show_edit"}},[n("my-form",{ref:"form",attrs:{schema:t.schema,"ui-schema":t.uiSchema,"submit-handler":t.onSubmit},on:{cancel:function(e){t.show_edit=!1}}})],1)],1)},a=[],r=n("a34a"),s=n.n(r),o=n("3040"),c=n("c665"),u=n("dc0a"),d=n("aa9a"),l=n("d328"),m=n("11d9"),h=n("9ab4"),p=n("60a3"),f=n("92fa"),v=n.n(f),b=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(m["a"])(e).apply(this,arguments)),t.items=[],t.pagination={rowsPerPage:10,page:1,descending:!1,sortBy:"",totalItems:0},t.loading=!1,t.search="",t}return Object(d["a"])(e,[{key:"created",value:function(){this.serverPage||this.fetchData()}},{key:"refresh",value:function(){this.fetchData()}},{key:"refetch",value:function(){this.serverPage&&this.fetchData()}},{key:"onSearch",value:function(t){this.search=t,this.serverPage&&this.refetch()}},{key:"render",value:function(){var t=this,e=arguments[0];return e("v-card",[e("v-card-title",[e("div",{class:"headline"},[this.title]),e("v-spacer"),e("v-text-field",{attrs:{value:this.search,"append-icon":"search",label:"搜索","hide-details":!0,clearable:!0,solo:!0},on:{input:this.onSearch}}),this.$slots.actions]),e("v-data-table",v()([{attrs:{headers:this.fields,items:this.items,pagination:this.pagination,loading:this.loading,search:this.search}},{on:{"update:pagination":function(e){t.pagination=e,t.refetch()}},scopedSlots:{items:function(n){return t.fields.map(function(t,i){return e("td",{key:i},[t.component?t.component(n):n.item[t.value]])})}}}]))])}},{key:"fetchData",value:function(){var t=Object(o["a"])(s.a.mark(function t(){var e,n,i;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.$apollo.query({query:this.gql,variables:Object.assign({search:this.search},this.pagination,this.gqlVars)});case 3:e=t.sent,n=e.data,i=n[Object.keys(n)[0]],this.serverPage?(this.items=i.items,this.pagination.totalItems=i.totalItems):(this.items=i,this.pagination.totalItems=i.length),this.loading=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),Object(u["a"])(e,t),e}(p["d"]);h["a"]([Object(p["c"])(Array)],b.prototype,"fields",void 0),h["a"]([Object(p["c"])()],b.prototype,"gql",void 0),h["a"]([Object(p["c"])()],b.prototype,"gqlVars",void 0),h["a"]([Object(p["c"])({type:Boolean,default:!0})],b.prototype,"immediate",void 0),h["a"]([Object(p["c"])(Boolean)],b.prototype,"serverPage",void 0),h["a"]([Object(p["c"])(String)],b.prototype,"itemKey",void 0),h["a"]([Object(p["c"])(String)],b.prototype,"title",void 0),b=h["a"]([Object(p["a"])({})],b);var y,k,g=b,j=g,O=(n("6224"),n("2877")),q=Object(O["a"])(j,y,k,!1,null,null,null);q.options.__file="DataTable.vue";var $=q.exports,_=n("8477"),x=n("3f7a"),S=n("a684"),w=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(m["a"])(e).apply(this,arguments)),t.show_edit=!1,t.edit_type="add",t.dialog_title="编辑",t}return Object(d["a"])(e,[{key:"onEdit",value:function(){var t=Object(o["a"])(s.a.mark(function t(e){var n,i,a,r,o;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.editFn){t.next=3;break}return this.editFn(e),t.abrupt("return");case 3:if(this.show_edit=!0,n=this.$refs.form,!e){t.next=17;break}return this.edit_type="edit",this.dialog_title="编辑",i=this.gfq.detail,a=i.query,r=i.name,t.next=11,this.$apollo.query({query:a,variables:{id:e.id}});case 11:o=t.sent,e=o.data,delete e[r].__typename,n.updateData(e[r]),t.next=20;break;case 17:this.edit_type="add",this.dialog_title="添加",n.clearData();case 20:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onDelete",value:function(){var t=Object(o["a"])(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("确定要删除吗？");case 2:return t.next=4,this.$apollo.mutate({mutation:this.gfq.del.mutation,variables:{id:e}});case 4:this.$toast("操作成功"),this.refreshTable();case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var t=Object(o["a"])(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$apollo.mutate({mutation:this.gfq.edit.mutation,variables:{item:e}});case 2:this.show_edit=!1,this.$toast("保存成功"),this.refreshTable();case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"refreshTable",value:function(){this.$refs.table.refresh()}},{key:"onDetailClick",value:function(t){this.detailFn?this.detailFn(t):this.$router.push({name:"".concat(this.name,"-id"),params:{id:t[this.routeKey]}})}},{key:"gfq",get:function(){return S[this.name]}},{key:"has_detail",get:function(){return 2&this.curd}},{key:"has_delete",get:function(){return 1&this.curd}},{key:"has_update",get:function(){return 4&this.curd}},{key:"has_add",get:function(){return 8&this.curd}},{key:"gql_list",get:function(){return this.gfq.list.query}},{key:"fields",get:function(){var t=this,e=this.$createElement,n=this.tableNames.map(function(e){return"string"===typeof e?{text:t.schema.properties[e].title,value:e,sortable:!1}:e});return n.push({text:"操作",sortable:!1,component:function(n){var i=n.item,a=[];return t.has_detail&&a.push(e("v-btn",{on:{click:function(){return t.onDetailClick(i)}},attrs:{small:!0,fab:!0,fla:!0,t:!0}},["查看"])),t.has_update&&a.push(e("v-btn",{attrs:{small:!0,fab:!0,flat:!0}},[e("v-icon",{on:{click:function(){return t.onEdit(i)}}},["edit "])])),t.has_delete&&a.push(e("v-btn",{attrs:{small:!0,color:"error",fab:!0,flat:!0}},[e("v-icon",{on:{click:function(){return t.onDelete(i.id)}}},["delet "])])),a}}),n}}]),Object(u["a"])(e,t),e}(p["d"]);h["a"]([Object(p["c"])()],w.prototype,"schema",void 0),h["a"]([Object(p["c"])()],w.prototype,"uiSchema",void 0),h["a"]([Object(p["c"])(Array)],w.prototype,"tableNames",void 0),h["a"]([Object(p["c"])({type:Number,default:15})],w.prototype,"curd",void 0),h["a"]([Object(p["c"])(String)],w.prototype,"name",void 0),h["a"]([Object(p["c"])(String)],w.prototype,"title",void 0),h["a"]([Object(p["c"])({type:String,default:"id"})],w.prototype,"routeKey",void 0),h["a"]([Object(p["c"])({default:500})],w.prototype,"dialogWidth",void 0),h["a"]([Object(p["c"])(Function)],w.prototype,"editFn",void 0),h["a"]([Object(p["c"])(Function)],w.prototype,"detailFn",void 0),w=h["a"]([Object(p["a"])({components:{DataTable:$,MyForm:_["a"],MyDialog:x["a"]}})],w);var D=w,N=D,F=(n("e86d"),Object(O["a"])(N,i,a,!1,null,null,null));F.options.__file="DataTableCommon.vue";e["a"]=F.exports},"3de0":function(t,e,n){},6224:function(t,e,n){"use strict";var i=n("1551"),a=n.n(i);a.a},9834:function(t,e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"special"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"template"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"layout"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"styles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scripts"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:126}};n.loc.source={body:"query($id: ID!){\n  special(id: $id) {\n    id\n    name\n    template\n    schema\n    data\n    layout\n    styles\n    scripts\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(t,e){if("FragmentSpread"===t.kind)e.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&e.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){i(t,e)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){i(t,e)}),t.definitions&&t.definitions.forEach(function(t){i(t,e)})}var a={};(function(){n.definitions.forEach(function(t){if(t.name){var e=new Set;i(t,e),a[t.name.value]=e}})})(),t.exports=n},a684:function(t,e,n){"use strict";n.r(e),n.d(e,"path",function(){return q}),n.d(e,"explorer",function(){return $}),n.d(e,"svn",function(){return _}),n.d(e,"editor",function(){return x}),n.d(e,"apidoc",function(){return S}),n.d(e,"json",function(){return w}),n.d(e,"terminal",function(){return D}),n.d(e,"special",function(){return N}),n.d(e,"skl",function(){return F});var i=n("6eec"),a=n("9530"),r=n.n(a);function s(){var t=Object(i["a"])(["mutation($ext:String,$path:String,$content:String,$id:ID!){\n      editSkl(ext:$ext,path:$path,content:$content,id:$id)\n    }"]);return s=function(){return t},t}function o(){var t=Object(i["a"])(["mutation($id:ID!){\n      delSpecial(id: $id)\n    }"]);return o=function(){return t},t}function c(){var t=Object(i["a"])(["mutation($item:SpecialInput!){\n      editSpecial(item:$item)\n    }"]);return c=function(){return t},t}function u(){var t=Object(i["a"])(["query{\n      specials {\n        id\n        name\n      }\n    }"]);return u=function(){return t},t}function d(){var t=Object(i["a"])(["query($id: ID!){\n      terminal(id: $id) {\n        id\n        username\n        host\n        password\n      }\n    }"]);return d=function(){return t},t}function l(){var t=Object(i["a"])(["mutation($id: ID!){\n      delTerminal(id: $id)\n    }"]);return l=function(){return t},t}function m(){var t=Object(i["a"])(["mutation($item: TerminalInput!){\n      editTerminal(item: $item)\n    }"]);return m=function(){return t},t}function h(){var t=Object(i["a"])(["{\n      terminals {\n        id\n        username\n        host\n        token\n      }\n    }"]);return h=function(){return t},t}function p(){var t=Object(i["a"])(['query{\n      paths(type: "json") {\n        id\n        path\n        name\n      }\n    }']);return p=function(){return t},t}function f(){var t=Object(i["a"])(['query{\n      paths(type: "apidoc markdown") {\n        id\n        path\n        name\n        type\n      }\n    }']);return f=function(){return t},t}function v(){var t=Object(i["a"])(['query{\n      paths(type: "editor") {\n        id\n        path\n        name\n      }\n    }']);return v=function(){return t},t}function b(){var t=Object(i["a"])(['query{\n      paths(type: "svn") {\n        id\n        path\n        name\n      }\n    }']);return b=function(){return t},t}function y(){var t=Object(i["a"])(['query{\n      paths(type: "explorer") {\n        id\n        path\n        name\n      }\n    }']);return y=function(){return t},t}function k(){var t=Object(i["a"])(["mutation($id: ID!){\n      delPath(id: $id)\n    }"]);return k=function(){return t},t}function g(){var t=Object(i["a"])(["mutation($item: PathInput!){\n      editPath(item: $item)\n    }"]);return g=function(){return t},t}function j(){var t=Object(i["a"])(["query($id: ID!){\n      path(id: $id) {\n        id\n        path\n        name\n      }\n    }"]);return j=function(){return t},t}function O(){var t=Object(i["a"])(["query{\n      paths {\n        id\n        path\n        name\n      }\n    }"]);return O=function(){return t},t}var q={list:{query:r()(O()),name:"paths"},detail:{query:r()(j()),vars:["id"],name:"path"},edit:{mutation:r()(g()),vars:["item"],name:"editPath"},del:{mutation:r()(k()),vars:["id"],name:"delPath"}},$=Object.assign({},q,{list:{query:r()(y()),name:"paths"}}),_=Object.assign({},q,{list:{query:r()(b()),name:"paths"}}),x=Object.assign({},q,{list:{query:r()(v()),name:"paths"}}),S=Object.assign({},q,{list:{query:r()(f()),name:"paths"}}),w=Object.assign({},q,{list:{query:r()(p()),name:"paths"}}),D={list:{query:r()(h()),name:"terminals"},edit:{mutation:r()(m()),vars:["item"],name:"editTerminal"},del:{mutation:r()(l()),vars:["id"],name:"delTerminal"},detail:{query:r()(d()),vars:["id"],name:"terminal"}},N={list:{query:r()(u()),name:"specials"},edit:{mutation:r()(c()),vars:["item"],name:"editSpecial"},del:{mutation:r()(o()),vars:["id"],name:"delSpecial"},detail:{query:n("9834"),vars:["id"],name:"special"}},F={edit:{mutation:r()(s())}}},e86d:function(t,e,n){"use strict";var i=n("3de0"),a=n.n(i);a.a}}]);