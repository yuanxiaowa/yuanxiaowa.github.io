(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video-player"],{"55f4":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"video-wrap"},[t.direct?r("iframe",{attrs:{width:"100%",height:"100%",src:t.url,frameborder:"0",allowfullscreen:""}}):!t.loading&&t.info&&t.info.url?[t.error_text?r("div",{staticClass:"text-xs-center"},[t._v("\n      出错了\n      "),r("v-btn",{attrs:{color:"red--text"},on:{click:t.reload}},[t._v("重试")])],1):r("video-player",{attrs:{src:t.info.url},on:{error:t.onError}})]:t._e(),r("div",{staticClass:"ma-2"},[t.direct?t._e():r("v-select",{attrs:{items:t.items,dense:""},model:{value:t.source,callback:function(e){t.source=e},expression:"source"}}),t.loading?r("div",[r("v-progress-circular",{attrs:{color:"primary",indeterminate:""}}),t._v("\n      正在获取数据...\n    ")],1):t.info?r("div",[r("v-layout",[r("h3",[t._v(t._s(t.info.title))]),r("v-spacer"),r("a",{attrs:{href:t.play_url,target:"_blank"}},[t._v("到源网站播放")])],1),r("div",{staticClass:"gray--text",domProps:{innerHTML:t._s(t.info.desc)}}),t.info.series?r("div",{staticClass:"mt-2"},[r("b",[t._v(t._s(t.info.series.title)+"剧集列表：")]),r("div",t._l(t.info.series.items,function(e,n){return r("v-btn",{key:n,attrs:{color:e.url===t.play_url?"primary--text":void 0,to:{query:{url:e.url,direct:String(t.direct)}}}},[t._v(t._s(e.title))])}),1)]):t._e()],1):t._e()],1)],2)},i=[],o=r("4795"),a=r.n(o),u=r("9ab4"),c=r("60a3"),s=r("cdf7"),l=r("5912"),f=r("9530"),p=r.n(f),d=r("4bb5");function v(t){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(){var t=h(["\n          query {\n            videoResolvers {\n              id\n              text\n              value\n            }\n          }\n        "]);return y=function(){return t},t}function h(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function b(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,i)}function w(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){b(o,n,i,a,u,"next",t)}function u(t){b(o,n,i,a,u,"throw",t)}a(void 0)})}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e,r){return e&&_(t.prototype,e),r&&_(t,r),t}function x(t,e){return!e||"object"!==v(e)&&"function"!==typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function O(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}function q(t,e){return q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},q(t,e)}var P=Object(d["e"])("music"),$=function(t){function e(){var t;return m(this,e),t=x(this,j(e).apply(this,arguments)),t.items=[],t.source="http://jqaaa.com/jx.php",t.info=null,t.loading=!1,t.error_text="",t.play_url="",t.direct=!0,t}return O(e,t),g(e,[{key:"created",value:function(){var t=w(a.a.mark(function t(){var e,r;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$route.query.type){t.next=6;break}return t.next=3,this.$apollo.query({query:p()(y())});case 3:e=t.sent,r=e.data.videoResolvers,this.items=r;case 6:this.setPlaying(!1);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"beforeRouteUpdate",value:function(){var t=this;this.direct="true"===String(this.$route.query.direct),this.$route.query.video_only?this.info={url:this.$route.query.url}:(this.loading=!0,this.play_url=this.$route.query.url,Object(s["c"])(this.play_url).info({url:this.play_url}).then(function(e){t.info=e,e.nodirect&&(t.play_url=e.url),t.error_text=""}).finally(function(){t.loading=!1}))}},{key:"onError",value:function(t){}},{key:"reload",value:function(){location.reload()}},{key:"url",get:function(){return"".concat(this.source,"?url=").concat(encodeURIComponent(this.play_url))}}]),e}(c["d"]);u["b"]([P.Mutation],$.prototype,"setPlaying",void 0),u["b"]([Object(c["e"])("$route",{immediate:!0})],$.prototype,"beforeRouteUpdate",null),$=u["b"]([Object(c["a"])({components:{VideoPlayer:l["a"]}})],$);var S=$,E=S,C=(r("a97b"),r("2877")),R=r("724d"),U=r.n(R),z=Object(C["a"])(E,n,i,!1,null,null,null);"function"===typeof U.a&&U()(z);e["default"]=z.exports},"724d":function(t,e){},9035:function(t,e,r){},a97b:function(t,e,r){"use strict";var n=r("9035"),i=r.n(n);i.a},cdf7:function(t,e,r){"use strict";r.d(e,"a",function(){return w}),r.d(e,"c",function(){return m}),r.d(e,"b",function(){return _}),r.d(e,"d",function(){return x});var n=r("4795"),i=r.n(n),o=r("bc3a"),a=r.n(o),u=r("9530"),c=r.n(u),s=r("53b8");function l(){var t=d(["\n        query {\n          videoSites {\n            text\n            value\n            indirect\n          }\n        }\n      "]);return l=function(){return t},t}function f(){var t=d(["query ($url: String!) {\n        video(url:$url) {\n          title\n          type\n          cover\n          url\n          desc\n          rate\n          series\n          nodirect\n        }\n      }"]);return f=function(){return t},t}function p(){var t=d(["query ($kw: String!,$type:String!, $page:Int) {\n        videoSearch(kw:$kw, type:$type,page:$page) {\n          page\n          pages\n          items\n        }\n      }"]);return p=function(){return t},t}function d(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function v(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,i)}function y(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){v(o,n,i,a,u,"next",t)}function u(t){v(o,n,i,a,u,"throw",t)}a(void 0)})}}var h={search:function(){var t=y(i.a.mark(function t(e){var r,n;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].query({query:c()(p()),variables:e});case 2:return r=t.sent,n=r.data.videoSearch,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),info:function(){var t=y(i.a.mark(function t(e){var r,n;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].query({query:c()(f()),variables:e});case 2:return r=t.sent,n=r.data.video,t.abrupt("return",n);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},b={search:function(){var t=y(i.a.mark(function t(e){var r,n,o,u,c;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("https://api.imjad.cn/bilibili/v2/",{params:{get:"search",keyword:e.kw,page:e.page}});case 2:if(r=t.sent,n=r.data,o=n.code,u=n.data,c=n.message,0===o){t.next=9;break}throw new Error(c);case 9:return t.abrupt("return",{page:u.page,pages:-1,items:u.items.archive.map(function(t){return t.url="https://www.bilibili.com/video/".concat(t.goto).concat(t.param),t})});case 10:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),info:function(){var t=y(i.a.mark(function t(e){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("暂无数据");case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()};function w(t){return"bilibili"===t?b:h}function m(t){return t.startsWith("https://www.bilibili.com")?b:h}function _(t){return g.apply(this,arguments)}function g(){return g=y(i.a.mark(function t(e){var r,n,o,u;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("https://api.apiopen.top/todayVideo");case 2:return r=t.sent,n=r.data,u=[],n.result.forEach(function(t){var e=t.data;"textCard"!==t.type?(e=e.content.data,e.playUrl&&o.items.push({title:e.title,cover:e.cover.detail,desc:e.description,url:e.playUrl})):o&&o.title===e.text||(o={title:e.text,items:[]},u.push(o))}),t.abrupt("return",u.filter(function(t){return t.items.length>0}));case 7:case"end":return t.stop()}},t)})),g.apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return k=y(i.a.mark(function t(){var e,r;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].query({fetchPolicy:"cache-and-network",query:c()(l())});case 2:return e=t.sent,r=e.data.videoSites,t.abrupt("return",r);case 5:case"end":return t.stop()}},t)})),k.apply(this,arguments)}}}]);