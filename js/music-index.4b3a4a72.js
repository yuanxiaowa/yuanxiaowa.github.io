(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music-index"],{"2c53":function(t,e,r){},"2f34":function(t,e,r){"use strict";var a=r("2c53"),i=r.n(a);i.a},3272:function(t,e,r){"use strict";r.d(e,"a",function(){return u});var a=r("bc3a"),i=r.n(a),s=(r("4758"),r("9530")),n=r.n(s),o=r("53b8");const c={async search(t,e){var r=await i.a.get("https://api.imjad.cn/cloudmusic/",{params:{type:"search",s:t,offset:e}}),a=r.data;if(200!==a.code)throw new Error("加载失败...");var s=a.result.songCount,n=a.result.songs.map(t=>({singer:t.name,cover:t.al.picUrl,title:t.al.name,arName:t.ar[0].name,id:t.id,mv:t.mv}));return{total:s,items:n}},getUrl(t){return i.a.get(`https://api.imjad.cn/cloudmusic/?type=song&br=128000&id=${t}`).then(({data:{data:[{url:t}]}})=>{if(!t)throw new Error("抱歉，该歌曲不存在");return t})},getLyric(t){return i.a.get(`https://api.imjad.cn/cloudmusic/?type=lyric&br=128000&id=${t}`).then(({data:t})=>{if(200!==t.code)throw new Error(t);if(t.nolyric||!t.lrc)throw new Error("无歌词");return t.lrc.lyric})},getRecoms(){throw new Error("暂无功能")},getHotKey(){throw new Error("暂无功能")},getSmartbox(t){throw new Error("暂无功能")},getMvUrl(t){return i.a.get(`https://api.imjad.cn/cloudmusic/?type=mv&br=128000&id=${t}`).then(({data:{data:t,code:e}})=>{if(200!==e)throw new Error("抱歉，没有找到该mv");return{cover:t.cover,url:t.brs[Object.keys(t.brs)[0]]}})}},l={async search(t,e,r){var a=await o["a"].query({query:n.a`query ($kw: String!,$type:String!, $page:Int) {
        musicSearch(kw:$kw, type:$type,page:$page) {
          page
          pages
          items
        }
      }`,variables:{kw:t,page:e,type:r}}),i=a.data.musicSearch,s=i.pages,c=i.items;return{total:10*s,items:c}},getLyric(t){throw new Error("暂无功能")},getUrl(t){throw new Error("暂无功能")},getRecoms(){throw new Error("暂无功能")},getHotKey(){throw new Error("暂无功能")},getSmartbox(t){throw new Error("暂无功能")},getMvUrl(t){throw new Error("暂无功能")}};function u(t){return"wangyiyun"===t?c:l}},aa6a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{fluid:""}},[r("v-layout",[r("div",[r("v-select",{attrs:{items:t.types,placeholder:"来源"},on:{change:t.onTypeChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),r("v-text-field",{attrs:{placeholder:"请输入关键字","append-icon":"search"},on:{"click:append":function(e){t.onSearch(!0)},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onSearch(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),r("div",[t._v("\n    搜索结果\n    "),r("v-layout",{attrs:{wrap:""}},t._l(t.contents,function(e,a){return r("v-flex",{key:a,staticClass:"my-1",attrs:{xs12:""}},[r("v-card",{attrs:{flat:""}},[r("v-layout",[r("div",[r("v-img",{attrs:{src:e.cover,width:"200","aspect-ratio":1.3}})],1),r("v-flex",[r("v-card-title",{attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"headline"},[t._v(t._s(e.title))]),r("div",{staticClass:"grey--text"},[t._v("歌手："+t._s(e.singer)+" 专辑："+t._s(e.arName))])])]),r("v-card-actions",[r("v-btn",{attrs:{color:"primary"},on:{click:function(r){t.toPlay(e)}}},[r("v-icon",[t._v("play_circle_filled")])],1),e.mv?r("v-btn",{attrs:{color:"blue"},on:{click:function(r){t.toPlayMv(e)}}},[r("v-icon",[t._v("videocam")]),t._v("\n                  MV\n                ")],1):t._e()],1)],1)],1)],1)],1)}),1),r("div",{staticClass:"text-xs-center"},[t.total_page>0?r("v-pagination",{attrs:{length:t.total_page},on:{input:function(e){t.onSearch(!1)}},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}}):t.total<0?r("div",[r("v-btn",{attrs:{disabled:t.offset<=1},on:{click:function(e){t.toPage(t.offset-1)}}},[t._v("上一页")]),r("v-btn",{on:{click:function(e){t.toPage(t.offset+1)}}},[t._v("下一页")])],1):t._e()],1)],1)],1)},i=[],s=r("9ab4"),n=r("60a3"),o=r("3272");let c=class extends n["d"]{constructor(){super(...arguments),this.types=[],this.contents=[],this.keyword="",this.type="wangyiyun",this.offset=1,this.limit=20,this.total=0}get total_page(){return Math.ceil(this.total/this.limit)}beforeRouteUpdate(){this.syncParams(),this.search()}onTypeChange(){this.keyword&&this.onSearch(!0)}syncParams(){let t=this.$route.query;this.keyword=t.keyword,this.limit=Number(t.limit)||20,this.offset=Number(t.offset)||1,this.type=t.type||"wangyiyun"}created(){this.types=[{value:"wangyiyun",text:"网易云音乐"},{value:"qq",text:"QQ音乐"},{value:"kuwo",text:"酷我"},{value:"netease",text:"网易"},{value:"xiami",text:"虾米"},{value:"kugou",text:"酷狗"},{value:"baidu",text:"百度"},{value:"1ting",text:"一听"},{value:"migu",text:"咪咕"},{value:"lizhi",text:"荔枝"},{value:"qingting",text:"蜻蜓"},{value:"ximalaya",text:"喜马拉雅"},{value:"kg",text:"全民K歌"},{value:"5singyc",text:"5sing原创"},{value:"5singfc",text:"5sing翻唱"}],this.$route.query.keyword&&(this.syncParams(),this.search())}onSearch(t){t&&(this.offset=1),this.$router.push({name:this.$route.name,query:{keyword:this.keyword,offset:String(this.offset),limit:String(this.limit),type:this.type}})}async search(){try{var t=await Object(o["a"])(this.type).search(this.keyword,this.offset-1,this.type),e=t.total,r=t.items;this.total=e,this.contents=r}catch(t){this.$toast(t.message)}}toPlay(t){this.$router.push({name:"music-id",params:{id:t.id},query:{url:t.url,type:this.type}})}async toPlayMv(t){var e=await Object(o["a"])(this.type).getMvUrl(t.mv);this.$router.push({name:"music-mv",query:e})}toPage(t){this.offset=t,this.onSearch(!1)}};s["a"]([Object(n["e"])("$route")],c.prototype,"beforeRouteUpdate",null),c=s["a"]([Object(n["a"])({})],c);var l=c,u=l,h=(r("2f34"),r("2877")),y=Object(h["a"])(u,a,i,!1,null,null,null);y.options.__file="index.vue";e["default"]=y.exports}}]);